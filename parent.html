<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <title>Parent Portal â€” Blooming Kids House</title>

    <!-- Google Fonts: Plus Jakarta Sans (matches tutor portal) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="favicon.ico" />

    <!-- Firebase compat SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

    <!-- Firebase Compat Bridge -->
    <script>
    (function () {
        var hostname = window.location.hostname;
        var isDev =
            hostname === 'localhost' ||
            hostname === '127.0.0.1' ||
            hostname.includes('bkhdevelop.netlify.app');

        var mainConfig = {
            apiKey:            'AIzaSyD1lJhsWMMs_qerLBSzk7wKhjLyI_11RJg',
            authDomain:        'bloomingkidsassessment.firebaseapp.com',
            projectId:         'bloomingkidsassessment',
            storageBucket:     'bloomingkidsassessment.appspot.com',
            messagingSenderId: '238975054977',
            appId:             '1:238975054977:web:87c70b4db044998a204980'
        };

        var devConfig = {
            apiKey:            'AIzaSyAu36oLPNsk0TPKVIwCzEHe9oOtJ7cZQXA',
            authDomain:        'blooming-kids-dev.firebaseapp.com',
            projectId:         'blooming-kids-dev',
            storageBucket:     'blooming-kids-dev.firebasestorage.app',
            messagingSenderId: '336022609689',
            appId:             '1:336022609689:web:ad5a0a74dcac011f21ef88'
        };

        var config = isDev ? devConfig : mainConfig;
        window.firebaseConfig = config;

        var APP_NAME = 'parent-portal';
        var app;
        try {
            app = firebase.app(APP_NAME);
        } catch (e) {
            app = firebase.initializeApp(config, APP_NAME);
        }

        var authInst = firebase.auth(app);
        authInst
            .setPersistence(firebase.auth.Auth.Persistence.SESSION)
            .catch(function (err) {
                console.warn('Parent portal: could not set auth persistence:', err.message);
            });

        window.db      = firebase.firestore(app);
        window.auth    = authInst;
        window.storage = firebase.storage(app);

        console.log('ğŸ”— Parent portal compat bridge ready |', isDev ? 'ğŸ› ï¸ DEVELOPMENT' : 'ğŸš€ PRODUCTION');
    })();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/libphonenumber-js@1.9.6/bundle/libphonenumber-js.min.js"></script>

    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BLOOMING KIDS Â· PARENT PORTAL â€” DESIGN SYSTEM
           Inspired by Tutor Portal aesthetic
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            /* Brand */
            --primary:        #16a34a;
            --primary-light:  #22c55e;
            --primary-dark:   #15803d;
            --primary-xdark:  #166534;
            --primary-glow:   rgba(34, 197, 94, 0.35);
            --primary-muted:  rgba(34, 197, 94, 0.12);

            --accent:         #f59e0b;
            --accent-light:   #fbbf24;
            --accent-dark:    #d97706;
            --accent-glow:    rgba(245, 158, 11, 0.4);

            --danger:         #ef4444;
            --info:           #3b82f6;
            --purple:         #8b5cf6;

            /* Surfaces */
            --surface:        rgba(255, 255, 255, 0.72);
            --surface-raised: rgba(255, 255, 255, 0.88);

            /* Text */
            --text:           #0f172a;
            --text-muted:     #475569;
            --text-xmuted:    #94a3b8;

            /* Borders */
            --border:         rgba(255, 255, 255, 0.55);
            --border-solid:   #e2e8f0;

            /* Shadows */
            --shadow-sm:      0 2px 8px -2px rgba(0,0,0,0.08);
            --shadow:         0 8px 24px -6px rgba(0,0,0,0.14), 0 2px 8px -2px rgba(0,0,0,0.06);
            --shadow-lg:      0 20px 48px -12px rgba(0,0,0,0.20), 0 8px 16px -6px rgba(0,0,0,0.08);
            --shadow-green:   0 8px 24px -6px rgba(22,163,74,0.35);

            /* Misc */
            --blur:           18px;
            --radius-sm:      0.5rem;
            --radius:         0.875rem;
            --radius-lg:      1.5rem;
            --radius-xl:      2rem;
            --radius-pill:    9999px;
            --transition:     all 0.22s cubic-bezier(0.22, 1, 0.36, 1);

            /* Legacy compat */
            --green-deep:     #166534;
            --green-primary:  #16a34a;
            --green-medium:   #22c55e;
            --green-light:    #bbf7d0;
            --green-pale:     #f0fdf4;
            --yellow-gold:    #f59e0b;
            --yellow-light:   #FFF8E1;
            --black-rich:     #0f172a;
            --black-mid:      #334155;
            --gray-soft:      #f8fafc;
            --gray-mid:       #e2e8f0;
            --white:          #FFFFFF;
            --shadow-md:      0 8px 24px rgba(22,163,74,0.12);
            --radius-card:    1.25rem;
        }

        /* â”€â”€ Body & background â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, sans-serif;
            background: url('https://res.cloudinary.com/dy2hxcyaf/image/upload/v1769020680/Gemini_Generated_Image_o5m8auo5m8auo5m8_hzzxks.png') center/cover fixed;
            min-height: 100vh;
            color: var(--text);
            -webkit-font-smoothing: antialiased;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background:
                radial-gradient(ellipse 60% 50% at 15% 20%, rgba(34,197,94,0.10) 0%, transparent 55%),
                radial-gradient(ellipse 50% 60% at 85% 80%, rgba(245,158,11,0.12) 0%, transparent 55%),
                radial-gradient(ellipse 40% 40% at 50% 50%, rgba(255,255,255,0.04) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        /* â”€â”€ Orbs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .orb {
            position: fixed; border-radius: 50%; filter: blur(80px);
            opacity: 0.18; z-index: 0; pointer-events: none;
            animation: orbFloat 22s infinite alternate ease-in-out;
        }
        .orb-1 { width: 380px; height: 380px; background: radial-gradient(circle, #22c55e, #16a34a); top: -120px; right: -80px; }
        .orb-2 { width: 480px; height: 480px; background: radial-gradient(circle, #fbbf24, #f59e0b); bottom: -180px; left: -120px; animation-delay: -7s; }
        @keyframes orbFloat {
            0%   { transform: translate(0, 0) scale(1); }
            50%  { transform: translate(20px, -15px) scale(1.06); }
            100% { transform: translate(-10px, 20px) scale(0.96); }
        }

        /* â”€â”€ Glass Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .glass-panel {
            background: var(--surface);
            backdrop-filter: blur(var(--blur)) saturate(200%) brightness(1.04);
            -webkit-backdrop-filter: blur(var(--blur)) saturate(200%) brightness(1.04);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-lg), 0 0 0 1px rgba(255,255,255,0.14) inset;
            border-radius: 2.5rem;
            transition: var(--transition);
            position: relative;
            z-index: 10;
        }

        .hidden { display: none !important; }

        /* â”€â”€ Text Gradient â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .text-gradient {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary-xdark) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        /* â”€â”€ Avatar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .avatar-modern {
            width: 46px; height: 46px;
            background: linear-gradient(145deg, var(--primary-light), var(--primary-xdark));
            border-radius: 1.2rem 1.2rem 1.2rem 0.4rem;
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: 700; font-size: 1.2rem;
            box-shadow: 0 6px 18px var(--primary-glow);
            border: 2px solid rgba(255,255,255,0.35);
            transition: var(--transition); cursor: default;
        }
        .avatar-modern:hover { transform: scale(1.07) rotate(3deg); }

        /* â”€â”€ Stat Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .stat-card {
            background: rgba(255,255,255,0.28);
            backdrop-filter: blur(12px) saturate(180%);
            -webkit-backdrop-filter: blur(12px) saturate(180%);
            border: 1px solid rgba(255,255,255,0.45);
            border-radius: 1.75rem;
            padding: 1.25rem 1.4rem;
            transition: var(--transition);
            box-shadow: 0 4px 20px -8px rgba(0,0,0,0.12);
            color: inherit; cursor: default;
            position: relative; overflow: hidden;
        }
        .stat-card::after {
            content: ''; position: absolute; inset: 0; border-radius: inherit;
            background: linear-gradient(135deg, rgba(255,255,255,0.18) 0%, transparent 60%);
            pointer-events: none;
        }
        .stat-card:hover {
            background: rgba(255,255,255,0.42);
            transform: translateY(-5px);
            border-color: rgba(255,255,255,0.65);
            box-shadow: 0 12px 36px -10px rgba(0,0,0,0.18);
        }
        .stat-icon {
            width: 50px; height: 50px;
            border-radius: 1.1rem;
            background: linear-gradient(135deg, var(--primary-light), var(--primary-xdark));
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 1.35rem;
            box-shadow: 0 6px 16px var(--primary-glow);
            flex-shrink: 0; transition: var(--transition);
        }
        .stat-card:hover .stat-icon { transform: scale(1.08) rotate(-4deg); }

        /* â”€â”€ Navigation Pills â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .nav-pill-container {
            background: rgba(0,0,0,0.06);
            border-radius: var(--radius-pill);
            padding: 0.35rem;
            backdrop-filter: blur(8px);
            display: flex; flex-wrap: wrap; gap: 0.15rem;
            border: 1px solid rgba(255,255,255,0.25);
            box-shadow: 0 2px 12px -4px rgba(0,0,0,0.10);
        }
        .nav-tab-modern {
            padding: 0.65rem 1.4rem;
            border-radius: var(--radius-pill);
            font-weight: 600; font-size: 0.85rem;
            color: var(--text); opacity: 0.65;
            transition: var(--transition);
            border: none; background: transparent;
            cursor: pointer; letter-spacing: -0.015em;
            white-space: nowrap;
            display: flex; align-items: center; gap: 0.5rem;
        }
        .nav-tab-modern i { font-size: 0.85rem; }
        .nav-tab-modern:hover {
            opacity: 0.9;
            background: rgba(255,255,255,0.4);
        }
        .nav-tab-modern.active {
            opacity: 1;
            background: white;
            color: var(--primary-dark);
            box-shadow: 0 4px 16px -4px rgba(0,0,0,0.18);
            font-weight: 700;
        }

        /* â”€â”€ Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .btn-modern {
            display: inline-flex; align-items: center; justify-content: center; gap: 0.55rem;
            padding: 0.65rem 1.35rem;
            border-radius: var(--radius-pill);
            font-weight: 600; font-size: 0.875rem;
            transition: var(--transition);
            border: 1px solid rgba(255,255,255,0.35);
            cursor: pointer;
            background: rgba(255,255,255,0.28);
            backdrop-filter: blur(12px);
            color: inherit;
            box-shadow: var(--shadow-sm);
            letter-spacing: -0.01em;
        }
        .btn-modern:hover {
            background: rgba(255,255,255,0.45);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        .btn-modern:active { transform: translateY(0); }

        .btn-primary-modern {
            background: linear-gradient(135deg, var(--primary-light), var(--primary-xdark));
            color: white !important; border: none;
            box-shadow: var(--shadow-green);
        }
        .btn-primary-modern:hover {
            background: linear-gradient(135deg, var(--primary), var(--primary-xdark));
            box-shadow: 0 16px 40px -8px rgba(22,163,74,0.45);
        }

        .btn-accent-modern {
            background: linear-gradient(135deg, var(--accent-light), var(--accent-dark));
            color: #3d1f00 !important; border: none;
            box-shadow: 0 6px 18px var(--accent-glow);
        }
        .btn-accent-modern:hover { box-shadow: 0 10px 28px var(--accent-glow); }

        .btn-danger-modern {
            background: linear-gradient(135deg, #f87171, #dc2626);
            color: white !important; border: none;
            box-shadow: 0 6px 18px rgba(239,68,68,0.35);
        }

        /* Legacy button compat */
        .btn-primary { width:100%;padding:14px;background:var(--primary);color:white;border:none;border-radius:var(--radius-sm);font-size:1rem;font-weight:700;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:8px;font-family:inherit; }
        .btn-primary:hover { background:var(--primary-dark);transform:translateY(-1px);box-shadow:var(--shadow-green); }
        .btn-primary:disabled { opacity:0.7;cursor:not-allowed;transform:none; }
        .btn-secondary { width:100%;padding:12px;background:var(--gray-soft);color:var(--black-mid);border:1.5px solid var(--gray-mid);border-radius:var(--radius-sm);font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.2s;font-family:inherit; }
        .btn-secondary:hover { background:var(--gray-mid); }

        /* â”€â”€ Auth Screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .auth-screen {
            min-height: 100vh;
            display: flex; align-items: center; justify-content: center;
            padding: 32px 16px;
            position: relative; z-index: 10;
        }
        .auth-card {
            width: 100%; max-width: 460px;
            background: rgba(255,255,255,0.92);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.6);
        }
        .auth-card-hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-xdark) 100%);
            padding: 32px; text-align: center;
            position: relative; overflow: hidden;
        }
        .auth-card-hero::before {
            content:''; position:absolute; inset:0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none'%3E%3Cg fill='%23ffffff' fill-opacity='0.06'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .auth-card-hero img { height:56px;width:auto;filter:brightness(0) invert(1);margin-bottom:12px;position:relative; }
        .auth-card-hero h2 { color:white;font-size:1.5rem;margin:0;font-weight:800;position:relative; }
        .auth-card-hero p { color:rgba(255,255,255,0.8);font-size:0.9rem;margin-top:6px;position:relative; }

        .auth-tabs { display:flex;background:var(--green-pale);border-bottom:1px solid var(--green-light); }
        .auth-tab-btn { flex:1;padding:14px;font-size:0.9rem;font-weight:600;border:none;cursor:pointer;transition:all 0.2s;font-family:inherit; }
        .auth-tab-btn.active { background:var(--primary);color:white; }
        .auth-tab-btn:not(.active) { background:transparent;color:var(--primary); }
        .auth-tab-btn:not(.active):hover { background:var(--green-light); }
        .auth-form-body { padding:32px; }

        .field-group { margin-bottom:18px; }
        .field-label { display:block;font-size:0.82rem;font-weight:600;color:var(--black-mid);margin-bottom:6px;letter-spacing:0.02em;text-transform:uppercase; }
        .field-input { width:100%;padding:12px 16px;border:1.5px solid var(--gray-mid);border-radius:var(--radius-sm);font-size:0.95rem;font-family:inherit;color:var(--text);background:white;transition:all 0.2s;outline:none; }
        .field-input:focus { border-color:var(--primary);box-shadow:0 0 0 3px rgba(22,163,74,0.12); }
        .field-input::placeholder { color:#94a3b8; }

        .forgot-link { background:none;border:none;color:var(--primary);font-size:0.85rem;cursor:pointer;font-family:inherit;text-decoration:underline;text-decoration-color:transparent;transition:all 0.2s; }
        .forgot-link:hover { text-decoration-color:var(--primary); }

        /* â”€â”€ Loading States â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .loading-spinner { border:3px solid rgba(22,163,74,0.15);border-top:3px solid var(--primary);border-radius:50%;width:24px;height:24px;animation:spin 0.8s linear infinite;display:inline-block; }
        .loading-spinner-small { border:2px solid rgba(22,163,74,0.15);border-top:2px solid var(--primary);border-radius:50%;width:16px;height:16px;animation:spin 0.8s linear infinite;display:inline-block; }
        @keyframes spin { 0%{transform:rotate(0deg)} 100%{transform:rotate(360deg)} }

        .skeleton { background:linear-gradient(90deg,#f0f0f0 25%,#e8e8e8 50%,#f0f0f0 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:6px; }
        @keyframes shimmer { 0%{background-position:200% 0} 100%{background-position:-200% 0} }

        /* â”€â”€ Content & Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .content-area { animation: fadeUp 0.3s ease; }
        @keyframes fadeUp { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }

        .card { background:var(--white);border-radius:var(--radius-card);box-shadow:var(--shadow-sm);border:1px solid var(--gray-mid); }
        .card-elevated { background:var(--white);border-radius:var(--radius-card);box-shadow:var(--shadow-md); }

        /* â”€â”€ Badges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .badge { display:inline-flex;align-items:center;padding:4px 10px;border-radius:var(--radius-pill);font-size:0.75rem;font-weight:600; }
        .badge-green  { background:#DCFCE7;color:#166534; }
        .badge-yellow { background:#FEF9C3;color:#854D0E; }
        .badge-red    { background:#FEE2E2;color:#991B1B; }
        .badge-blue   { background:#DBEAFE;color:#1E3A8A; }
        .badge-gray   { background:#F3F4F6;color:#4B5563; }

        /* â”€â”€ Student Report Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .student-report-card {
            background: var(--white);
            border-radius: var(--radius-card);
            border: 1px solid var(--gray-mid);
            overflow: hidden; margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            transition: box-shadow 0.2s;
        }
        .student-report-card:hover { box-shadow: var(--shadow-md); }

        .student-report-card-header {
            background: linear-gradient(to right, var(--green-pale), var(--white));
            padding: 20px 24px;
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer;
            border-bottom: 1px solid var(--gray-mid);
        }
        .student-avatar {
            width: 44px; height: 44px;
            background: linear-gradient(145deg, var(--primary-light), var(--primary-xdark));
            border-radius: 1rem 1rem 1rem 0.3rem;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.3rem; margin-right: 14px; flex-shrink: 0;
            color: white; font-weight: 700;
            box-shadow: 0 4px 12px var(--primary-glow);
        }
        .student-card-meta h3 { font-size:1.05rem;font-weight:700;color:var(--green-deep);margin:0 0 3px; }
        .student-card-meta p { font-size:0.8rem;color:#64748b;margin:0; }

        /* â”€â”€ Grade Circles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .grade-circle { width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.3rem;font-weight:700; }
        .grade-a { background:#DCFCE7;color:#166534; }
        .grade-b { background:#DBEAFE;color:#1E3A8A; }
        .grade-c { background:#FEF9C3;color:#854D0E; }
        .grade-f { background:#FEE2E2;color:#991B1B; }

        /* â”€â”€ Accordion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .accordion-header { background:var(--white);border:1px solid var(--gray-mid);border-radius:var(--radius-card);padding:20px 24px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;transition:all 0.2s;box-shadow:var(--shadow-sm); }
        .accordion-header:hover { border-color:var(--green-light);box-shadow:var(--shadow-md);transform:translateY(-1px); }
        .accordion-content { overflow:hidden;transition:max-height 0.35s cubic-bezier(0.4,0,0.2,1),opacity 0.3s ease; }
        .accordion-content.hidden { max-height:0 !important;opacity:0; }
        .accordion-content:not(.hidden) { max-height:8000px;opacity:1; }

        /* â”€â”€ Info Tiles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .info-tile { background:var(--green-pale);border:1px solid var(--green-light);border-radius:10px;padding:12px 16px;display:flex;align-items:flex-start;gap:12px; }
        .info-tile-icon { font-size:1.3rem;flex-shrink:0; }
        .info-tile-text h5 { font-size:0.78rem;font-weight:700;text-transform:uppercase;letter-spacing:0.05em;color:var(--green-deep);margin:0 0 2px; }
        .info-tile-text p { font-size:0.88rem;color:var(--black-mid);margin:0; }

        /* â”€â”€ Stepper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .stepper { display:flex;gap:8px;margin-bottom:28px; }
        .step-item { flex:1;height:4px;border-radius:2px;background:var(--gray-mid);transition:background 0.3s; }
        .step-item.active { background:var(--primary); }
        .step-item.done { background:var(--primary-dark); }
        .step-panel { display:none; }
        .step-panel.active { display:block; }

        /* â”€â”€ Picker Chips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .picker-grid { display:flex;flex-wrap:wrap;gap:8px; }
        .picker-chip { padding:7px 14px;border:1.5px solid var(--gray-mid);border-radius:var(--radius-pill);font-size:0.82rem;font-weight:600;cursor:pointer;transition:all 0.15s;background:var(--white);color:#4B5563;font-family:inherit; }
        .picker-chip:hover { border-color:var(--primary);color:var(--primary); }
        .picker-chip.selected { background:var(--primary);border-color:var(--primary);color:white; }

        /* â”€â”€ Referral Box â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .referral-code-box { background:linear-gradient(135deg,var(--green-deep),var(--primary));border-radius:var(--radius-card);padding:28px;color:white;margin-bottom:24px; }
        .referral-code-display { font-family:'Courier New',monospace;font-size:2rem;font-weight:700;letter-spacing:0.12em;background:rgba(255,255,255,0.15);padding:12px 20px;border-radius:10px;display:inline-block;border:1.5px dashed rgba(255,255,255,0.5);user-select:all;cursor:text; }

        /* â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .message-toast { position:fixed;top:84px;right:16px;padding:14px 20px;border-radius:var(--radius);color:white;font-weight:500;z-index:9999;max-width:340px;box-shadow:0 8px 24px rgba(0,0,0,0.2);animation:slideInRight 0.3s ease;font-size:0.9rem;backdrop-filter:blur(8px); }
        @keyframes slideInRight { from{transform:translateX(120%);opacity:0} to{transform:translateX(0);opacity:1} }

        /* â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .modal-overlay { position:fixed;inset:0;background:rgba(15,23,42,0.55);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:9000;padding:1rem;animation:fadeIn 0.2s ease; }
        .modal-box { background:white;border-radius:1.5rem;width:100%;max-width:580px;max-height:90vh;overflow-y:auto;box-shadow:var(--shadow-lg);animation:slideInUp 0.3s cubic-bezier(0.22,1,0.36,1); }
        .modal-box-wide { max-width:720px; }
        .modal-header { padding:24px 28px 20px;border-bottom:1px solid var(--gray-mid);display:flex;align-items:center;justify-content:space-between; }
        .modal-header h3 { font-size:1.25rem;color:var(--green-deep);margin:0;font-weight:800; }
        .modal-close { background:var(--gray-soft);border:none;border-radius:50%;width:34px;height:34px;font-size:1.2rem;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#6B7280;transition:all 0.2s; }
        .modal-close:hover { background:var(--gray-mid);color:var(--text); }
        .modal-body { padding:24px 28px; }
        .modal-footer { padding:16px 28px 24px;display:flex;gap:10px; }
        @keyframes fadeIn { from{opacity:0} to{opacity:1} }
        @keyframes slideInUp { from{transform:translateY(1.5rem);opacity:0} to{transform:translateY(0);opacity:1} }

        /* â”€â”€ Floating Action Button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .fab-container { position:fixed;bottom:28px;right:20px;z-index:999;display:flex;flex-direction:column;align-items:flex-end;gap:12px; }
        .fab-main {
            width: 60px; height: 60px; border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--primary-xdark));
            color: white; border: none; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 8px 28px rgba(22,163,74,0.45);
            transition: var(--transition);
            position: relative;
        }
        .fab-main:hover { transform: scale(1.1) rotate(12deg); box-shadow: 0 14px 36px rgba(22,163,74,0.55); }
        .fab-badge { position:absolute;top:-4px;right:-4px;background:var(--danger);color:white;border-radius:50%;width:22px;height:22px;display:flex;align-items:center;justify-content:center;font-size:0.7rem;font-weight:700;border:2.5px solid white; }
        .fab-menu { display:none;flex-direction:column;align-items:flex-end;gap:8px; }
        .fab-menu.open { display:flex; }
        .fab-option {
            display: flex; align-items: center; gap: 10px;
            padding: 10px 18px 10px 14px;
            background: white; border-radius: var(--radius-pill);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-solid);
            cursor: pointer; transition: var(--transition);
            font-size: 0.85rem; font-weight: 600;
            white-space: nowrap;
        }
        .fab-option:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .fab-option i { width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:0.85rem; }

        /* â”€â”€ Payments Coming Soon â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .coming-soon-container {
            text-align: center; padding: 60px 24px;
            background: linear-gradient(135deg, rgba(245,158,11,0.05), rgba(34,197,94,0.05));
            border-radius: var(--radius-card);
            border: 2px dashed rgba(245,158,11,0.3);
        }
        .coming-soon-icon { font-size:5rem;margin-bottom:16px;display:block; }
        .coming-soon-title { font-size:1.6rem;font-weight:800;color:var(--green-deep);margin-bottom:8px; }
        .coming-soon-text { font-size:1rem;color:var(--text-muted);max-width:460px;margin:0 auto;line-height:1.7; }

        /* â”€â”€ Notification Badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .notification-badge { position:absolute;top:-6px;right:-6px;background:#EF4444;color:white;border-radius:50%;font-size:0.65rem;font-weight:700;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;padding:0 4px; }

        /* â”€â”€ Policy Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .policy-section { margin-bottom:20px; }
        .policy-section h4 { font-size:1rem;color:var(--green-deep);margin:0 0 8px; }
        .policy-section p { font-size:0.88rem;line-height:1.6;color:#4B5563;margin:0; }

        /* â”€â”€ Response Bubble â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .response-bubble { background:var(--green-pale);border:1px solid var(--green-light);border-radius:10px;padding:12px 16px;margin-top:10px; }
        .response-header { font-weight:700;color:var(--green-deep);font-size:0.85rem;margin-bottom:4px; }
        .preserve-whitespace { white-space:pre-wrap;word-break:break-word; }

        /* â”€â”€ Fee Summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .fee-summary { background:linear-gradient(135deg,#fffbeb,#fef3c7);border:1px solid #fde68a;border-radius:var(--radius-card);padding:20px;margin-top:16px; }
        .fee-summary-title { font-size:0.9rem;font-weight:800;color:#92400e;margin-bottom:12px;display:flex;align-items:center;gap:8px; }
        .fee-row { display:flex;justify-content:space-between;padding:6px 0;font-size:0.88rem;color:#374151; }
        .fee-row.total { border-top:2px solid #f59e0b;margin-top:8px;padding-top:12px;font-weight:800;font-size:1rem;color:#92400e; }

        /* â”€â”€ Legacy compat classes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .tab-active-main { }
        .tab-inactive-main { }
        .progress-accordion-content { transition:all 0.4s ease;overflow:hidden; }
        .progress-accordion-content.hidden { max-height:0 !important;opacity:0; }
        .progress-accordion-content:not(.hidden) { max-height:5000px;opacity:1; }
        .topic-item { transition:all 0.2s;border-left:4px solid #3b82f6; }
        .topic-item:hover { transform:translateX(4px); }
        .homework-item { transition:all 0.2s;border-left:4px solid #8b5cf6; }
        .homework-item:hover { transform:translateX(4px); }
        .status-overdue { background:#fef2f2;color:#dc2626; }
        .status-pending { background:#eff6ff;color:#1d4ed8; }
        .status-submitted { background:#f0fdf4;color:#15803d; }

        /* â”€â”€ Chart container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .chart-container { background:white;border-radius:var(--radius-card);padding:16px;margin:16px 0;box-shadow:var(--shadow-sm); }

        /* â”€â”€ Scrollbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        ::-webkit-scrollbar { width:6px; }
        ::-webkit-scrollbar-track { background:transparent; }
        ::-webkit-scrollbar-thumb { background:var(--green-light);border-radius:3px; }
        ::-webkit-scrollbar-thumb:hover { background:var(--primary); }
        .hide-scrollbar::-webkit-scrollbar { display:none; }
        .hide-scrollbar { -ms-overflow-style:none;scrollbar-width:none; }

        /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        @media (max-width: 640px) {
            .nav-tab-modern { padding:0.55rem 0.9rem;font-size:0.78rem; }
            .nav-tab-modern span.tab-label { display:none; }
            .modal-body,.modal-header,.modal-footer { padding-left:16px;padding-right:16px; }
            .fab-main { width:52px;height:52px;font-size:1.3rem; }
            .stat-card { padding:1rem 1.1rem; }
        }

        /* Fade-in for page sections */
        .fade-in { animation:fadeIn 0.4s ease; }
        .slide-down { animation:slideDown 0.3s ease-out; }
        @keyframes slideDown { from{opacity:0;transform:translateY(-8px)} to{opacity:1;transform:translateY(0)} }
    </style>
</head>
<body>

    <!-- Background Orbs -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <div id="appRoot">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         AUTH SCREEN
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="authArea" class="auth-screen">
        <div class="auth-card">
            <div class="auth-card-hero">
                <img src="https://res.cloudinary.com/dy2hxcyaf/image/upload/v1757700806/newbhlogo_umwqzy.svg" alt="BKH Logo">
                <h2>Welcome Back</h2>
                <p>Secure access to your children's progress</p>
            </div>
            <div class="auth-tabs">
                <button id="signInTab" class="auth-tab-btn active" onclick="switchTab('signin')">Sign In</button>
                <button id="signUpTab" class="auth-tab-btn" onclick="switchTab('signup')">Sign Up</button>
            </div>
            <!-- Sign In Form -->
            <div class="auth-form-body" id="signInForm">
                <div class="field-group">
                    <label class="field-label" for="loginIdentifier">Phone Number or Email</label>
                    <input id="loginIdentifier" type="text" placeholder="Enter your phone or email" class="field-input" required>
                </div>
                <div class="field-group">
                    <label class="field-label" for="loginPassword">Password</label>
                    <input id="loginPassword" type="password" placeholder="Enter your password" class="field-input" required>
                </div>
                <div class="flex items-center mb-4">
                    <input id="rememberMe" type="checkbox" class="h-4 w-4 rounded" style="accent-color:var(--primary)">
                    <label for="rememberMe" class="ml-2 text-sm text-gray-600">Remember me</label>
                </div>
                <button id="signInBtn" class="btn-primary">
                    <span id="signInText">Sign In</span>
                    <div id="signInSpinner" class="loading-spinner-small hidden" style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
                </button>
                <div class="text-center mt-3">
                    <button id="forgotPasswordBtn" class="forgot-link">Forgot Password?</button>
                </div>
            </div>
            <!-- Sign Up Form -->
            <div class="auth-form-body hidden" id="signUpForm">
                <div id="phoneInputContainer">
                    <div class="field-group">
                        <label class="field-label" for="signupPhone">Phone Number</label>
                        <input id="signupPhone" type="tel" placeholder="Enter your phone number" class="field-input" required>
                    </div>
                </div>
                <div class="field-group">
                    <label class="field-label" for="signupEmail">Email Address</label>
                    <input id="signupEmail" type="email" placeholder="Enter your email address" class="field-input" required>
                </div>
                <div class="field-group">
                    <label class="field-label" for="signupPassword">Password</label>
                    <input id="signupPassword" type="password" placeholder="Minimum 6 characters" class="field-input" required minlength="6">
                </div>
                <div class="field-group">
                    <label class="field-label" for="signupConfirmPassword">Confirm Password</label>
                    <input id="signupConfirmPassword" type="password" placeholder="Confirm your password" class="field-input" required minlength="6">
                </div>
                <button id="signUpBtn" class="btn-primary">
                    <span id="signUpText">Create Account</span>
                    <div id="signUpSpinner" class="loading-spinner-small hidden" style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
                </button>
            </div>
            <!-- Auth Loader -->
            <div id="authLoader" class="hidden text-center pb-6">
                <div class="loading-spinner mx-auto" style="width:32px;height:32px;"></div>
                <p class="mt-2 text-sm" style="color:var(--primary);">Processingâ€¦ please wait</p>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         DASHBOARD (shown when authenticated)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="reportArea" class="hidden">
        <div class="min-h-screen p-3 md:p-6 lg:p-8 flex justify-center items-start relative" style="z-index:10;">
            <div class="glass-panel w-full max-w-7xl p-5 md:p-8 lg:p-10 relative overflow-hidden">

                <!-- â”€â”€â”€ Header â”€â”€â”€ -->
                <div class="relative z-20 flex flex-wrap items-center justify-between gap-4 mb-6">
                    <div class="flex items-center gap-3 sm:gap-4">
                        <div class="relative group">
                            <div class="absolute -inset-1 bg-gradient-to-r from-green-400 to-blue-500 rounded-full blur-xl opacity-40 group-hover:opacity-70 transition"></div>
                            <img src="https://res.cloudinary.com/dy2hxcyaf/image/upload/v1757700806/newbhlogo_umwqzy.svg"
                                 alt="Blooming Kids House" class="relative h-14 w-auto object-contain drop-shadow-2xl">
                        </div>
                        <div>
                            <h1 class="text-xl md:text-2xl font-extrabold tracking-tight">
                                <span id="welcomeMessage" class="text-gradient">Welcome!</span>
                            </h1>
                            <p class="text-xs md:text-sm font-medium flex items-center gap-1" style="color:var(--text-muted);">
                                <i class="fas fa-seedling" style="color:var(--primary);"></i> Parent Portal
                            </p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 sm:gap-3" id="headerActions">
                        <div class="hidden sm:flex items-center gap-2 px-4 py-2 rounded-full" style="background:rgba(255,255,255,0.3);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.4);">
                            <i class="far fa-calendar-alt" style="color:var(--primary);"></i>
                            <span id="currentDate" style="font-size:0.85rem;font-weight:600;"></span>
                        </div>
                        <!-- Add Student Button -->
                        <button class="btn-accent-modern btn-modern" onclick="showAddStudentModal()" style="font-size:0.82rem;">
                            <i class="fas fa-user-plus"></i><span class="hidden sm:inline">Add Student</span>
                        </button>
                        <!-- Single Logout Button -->
                        <button class="btn-modern" onclick="logout()" style="background:rgba(239,68,68,0.15);border-color:rgba(239,68,68,0.3);color:#dc2626;font-size:0.82rem;">
                            <i class="fas fa-sign-out-alt"></i><span class="hidden sm:inline">Logout</span>
                        </button>
                        <div class="avatar-modern hidden md:flex" id="headerAvatar">P</div>
                    </div>
                </div>

                <!-- â”€â”€â”€ Stat Cards â”€â”€â”€ -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-8 relative z-20">
                    <div class="stat-card flex items-center gap-3" id="statStudents">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div>
                            <p class="text-xs opacity-70">Children</p>
                            <p class="text-2xl font-bold" id="statChildrenCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card flex items-center gap-3" id="statReports">
                        <div class="stat-icon" style="background:linear-gradient(145deg,#3b82f6,#1e3a8a);"><i class="fas fa-file-alt"></i></div>
                        <div>
                            <p class="text-xs opacity-70">Reports</p>
                            <p class="text-2xl font-bold" id="statReportsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card flex items-center gap-3" id="statSubjects">
                        <div class="stat-icon" style="background:linear-gradient(145deg,#fbbf24,#d97706);"><i class="fas fa-book-open"></i></div>
                        <div>
                            <p class="text-xs opacity-70">Subjects</p>
                            <p class="text-2xl font-bold" id="statSubjectsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card flex items-center gap-3" id="statRewards">
                        <div class="stat-icon" style="background:linear-gradient(145deg,#ec4899,#831843);"><i class="fas fa-gift"></i></div>
                        <div>
                            <p class="text-xs opacity-70">Referral Bonus</p>
                            <p class="text-2xl font-bold" id="statRewardsAmount">â‚¦0</p>
                        </div>
                    </div>
                </div>

                <!-- â”€â”€â”€ Navigation Pills â”€â”€â”€ -->
                <nav class="relative z-20 mb-8 overflow-x-auto hide-scrollbar">
                    <div class="nav-pill-container">
                        <button id="reportTab" class="nav-tab-modern active" onclick="switchMainTab('report')">
                            <i class="fas fa-chart-line"></i><span class="tab-label">Progress Reports</span>
                        </button>
                        <button id="academicsTab" class="nav-tab-modern" onclick="switchMainTab('academics')">
                            <i class="fas fa-graduation-cap"></i><span class="tab-label">Academics</span>
                        </button>
                        <button id="rewardsTab" class="nav-tab-modern" onclick="switchMainTab('rewards')">
                            <i class="fas fa-gift"></i><span class="tab-label">Rewards</span>
                        </button>
                        <button id="paymentsTab" class="nav-tab-modern" onclick="switchMainTab('payments')">
                            <i class="fas fa-credit-card"></i><span class="tab-label">Payments</span>
                        </button>
                        <button id="settingsTab" class="nav-tab-modern" onclick="switchMainTab('settings')">
                            <i class="fas fa-cog"></i><span class="tab-label">Settings</span>
                        </button>
                    </div>
                </nav>

                <!-- â•â•â• CONTENT AREAS â•â•â• -->

                <!-- â”€â”€â”€ Progress Reports â”€â”€â”€ -->
                <main class="relative z-20 min-h-[400px]">
                <div id="reportContentArea" class="content-area">
                    <div style="margin-bottom:20px;">
                        <h2 style="font-size:1.4rem;font-weight:800;color:var(--green-deep);margin:0 0 4px;">Children's Progress Reports</h2>
                        <p style="color:var(--text-muted);font-size:0.88rem;">Click on a student's card to expand their reports</p>
                    </div>
                    <div id="reportsLoading" class="hidden text-center py-12">
                        <div class="loading-spinner mx-auto" style="width:40px;height:40px;"></div>
                        <p class="mt-4 text-sm" style="color:var(--primary);">Loading reportsâ€¦</p>
                    </div>
                    <div id="reportsEmpty" class="hidden text-center py-16 card" style="padding:48px;">
                        <div style="font-size:3.5rem;margin-bottom:16px;">ğŸ“¬</div>
                        <h3 style="font-size:1.15rem;font-weight:700;color:#374151;margin:0 0 8px;">No Reports Available</h3>
                        <p style="color:#6B7280;font-size:0.88rem;max-width:360px;margin:0 auto;">
                            No progress reports are available at this time. Check back after your child's sessions.
                        </p>
                    </div>
                    <div id="reportContent" class="space-y-4"></div>
                </div>

                <!-- â”€â”€â”€ Academics â”€â”€â”€ -->
                <div id="academicsContentArea" class="content-area hidden">
                    <div style="margin-bottom:20px;">
                        <h2 style="font-size:1.4rem;font-weight:800;color:var(--green-deep);margin:0 0 4px;">Academic Progress &amp; Assignments</h2>
                        <p style="color:var(--text-muted);font-size:0.88rem;">Subjects, schedule, session topics, and homework</p>
                    </div>
                    <div id="academicsStudentDropdown" class="mb-5"></div>
                    <div id="academicsContent" class="card" style="padding:24px;min-height:300px;"></div>
                </div>

                <!-- â”€â”€â”€ Rewards â”€â”€â”€ -->
                <div id="rewardsContentArea" class="content-area hidden">
                    <div style="margin-bottom:20px;">
                        <h2 style="font-size:1.4rem;font-weight:800;color:var(--green-deep);margin:0 0 4px;">Referral Rewards Dashboard</h2>
                        <p style="color:var(--text-muted);font-size:0.88rem;">Track your earnings and referral history</p>
                    </div>
                    <div id="rewardsContent" class="card" style="padding:24px;min-height:300px;"></div>
                </div>

                <!-- â”€â”€â”€ Payments (NEW - Coming Soon) â”€â”€â”€ -->
                <div id="paymentsContentArea" class="content-area hidden">
                    <div class="coming-soon-container">
                        <span class="coming-soon-icon">ğŸ’°âœ¨</span>
                        <h2 class="coming-soon-title">Payment Portal Coming Soon!</h2>
                        <p class="coming-soon-text">
                            We're counting coins and polishing the payment portal! ğŸ¦<br>
                            Soon you'll be able to view invoices, track payments, and settle fees â€” all in one place.<br><br>
                            <span style="font-size:0.9rem;color:var(--accent-dark);font-weight:700;">Check back soon to settle fees with a smile ğŸ˜Š</span>
                        </p>
                        <div style="margin-top:24px;">
                            <span style="display:inline-block;background:linear-gradient(135deg,var(--accent-light),var(--accent-dark));color:#3d1f00;padding:10px 24px;border-radius:var(--radius-pill);font-weight:700;font-size:0.88rem;box-shadow:0 4px 16px var(--accent-glow);">
                                <i class="fas fa-bell" style="margin-right:6px;"></i> We'll notify you when it's ready!
                            </span>
                        </div>
                    </div>
                </div>

                <!-- â”€â”€â”€ Settings â”€â”€â”€ -->
                <div id="settingsContentArea" class="content-area hidden">
                    <div style="margin-bottom:20px;">
                        <h2 style="font-size:1.4rem;font-weight:800;color:var(--green-deep);margin:0 0 4px;">
                            <i class="fas fa-cog" style="margin-right:6px;"></i> Family Profile &amp; Settings
                        </h2>
                        <p style="color:var(--text-muted);font-size:0.88rem;">Manage your profile and children's details</p>
                    </div>
                    <div id="settingsDynamicContent" class="card" style="padding:24px;min-height:300px;">
                        <div class="loading-spinner mx-auto"></div>
                    </div>
                </div>

                </main>

                <!-- â”€â”€â”€ Footer â”€â”€â”€ -->
                <div class="relative z-20 mt-8 text-center" style="padding:16px 0;">
                    <p style="font-size:0.82rem;color:var(--text-muted);margin:0;">
                        Â© 2026 Blooming Kids House Â· Where Every Child Blossoms ğŸŒ±
                    </p>
                    <div style="display:flex;justify-content:center;gap:16px;margin-top:10px;">
                        <button onclick="showPrivacyModal()" style="font-size:0.82rem;color:var(--primary);background:none;border:none;cursor:pointer;font-family:inherit;">Privacy Policy</button>
                        <span style="color:#D1D5DB;">|</span>
                        <button onclick="showPrivacyModal('terms')" style="font-size:0.82rem;color:var(--primary);background:none;border:none;cursor:pointer;font-family:inherit;">Terms of Use</button>
                        <span style="color:#D1D5DB;">|</span>
                        <a href="mailto:support@bloomingkidshouse.com" style="font-size:0.82rem;color:var(--primary);text-decoration:none;">Contact Support</a>
                    </div>
                    <div style="margin-top:6px;font-size:0.72rem;color:var(--text-xmuted);display:flex;align-items:center;justify-content:center;gap:6px;">
                        <i class="fas fa-shield-alt" style="color:var(--primary);"></i> End-to-end encrypted Â· Blooming Kids Care v3.0
                    </div>
                </div>
            </div>
        </div>
    </div>

    </div><!-- /appRoot -->

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         FLOATING ACTION BUTTON (Merged Feedback + Messages)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="fab-container" id="fabContainer" style="display:none;">
        <div class="fab-menu" id="fabMenu">
            <div class="fab-option" onclick="showFeedbackModal(); closeFabMenu();">
                <i style="background:linear-gradient(135deg,#8b5cf6,#6d28d9);"><span class="fas fa-comment-dots"></span></i>
                <span>Send Feedback</span>
            </div>
            <div class="fab-option" onclick="showResponsesModal(); closeFabMenu();">
                <i style="background:linear-gradient(135deg,#3b82f6,#1d4ed8);"><span class="fas fa-inbox"></span></i>
                <span>Messages</span>
            </div>
        </div>
        <button class="fab-main" onclick="toggleFabMenu()" id="fabBtn" title="Feedback & Messages">
            <i class="fas fa-comment-alt" id="fabIcon"></i>
        </button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MODALS
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

    <!-- â”€â”€ Feedback Modal â”€â”€ -->
    <div id="feedbackModal" class="modal-overlay hidden">
        <div class="modal-box">
            <div class="modal-header">
                <h3>ğŸ’¬ Send Feedback</h3>
                <button class="modal-close" onclick="hideFeedbackModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <p style="color:var(--text-muted);font-size:0.88rem;margin-bottom:20px;">
                    We value your feedback! Please fill in the details below.
                </p>
                <div class="field-group">
                    <label class="field-label" for="feedbackCategory">Category *</label>
                    <select id="feedbackCategory" class="field-input" required>
                        <option value="">Select category</option>
                        <option value="Feedback">General Feedback</option>
                        <option value="Request">Special Request</option>
                        <option value="Complaint">Complaint</option>
                        <option value="Suggestion">Suggestion</option>
                    </select>
                </div>
                <div class="field-group">
                    <label class="field-label" for="feedbackPriority">Priority *</label>
                    <select id="feedbackPriority" class="field-input" required>
                        <option value="">Select priority</option>
                        <option value="Low">Low</option>
                        <option value="Medium">Medium</option>
                        <option value="High">High</option>
                        <option value="Urgent">Urgent</option>
                    </select>
                </div>
                <div class="field-group">
                    <label class="field-label" for="feedbackStudent">Regarding Student *</label>
                    <select id="feedbackStudent" class="field-input" required>
                        <option value="">Select student</option>
                    </select>
                </div>
                <div class="field-group">
                    <label class="field-label" for="feedbackMessage">Your Message *</label>
                    <textarea id="feedbackMessage" rows="5" class="field-input preserve-whitespace"
                              placeholder="Describe your feedbackâ€¦" required style="resize:vertical;"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="submitFeedbackBtn" class="btn-primary" onclick="submitFeedback()" style="flex:1;">
                    <span id="submitFeedbackText">Submit Feedback</span>
                    <div id="submitFeedbackSpinner" class="loading-spinner-small hidden" style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
                </button>
                <button class="btn-secondary" onclick="hideFeedbackModal()" style="width:auto;padding:12px 20px;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- â”€â”€ Admin Responses Modal â”€â”€ -->
    <div id="responsesModal" class="modal-overlay hidden">
        <div class="modal-box modal-box-wide">
            <div class="modal-header">
                <h3>ğŸ“¨ Admin Responses</h3>
                <button class="modal-close" onclick="hideResponsesModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <p style="color:var(--text-muted);font-size:0.88rem;margin-bottom:20px;">
                    Responses from our staff to your submitted feedback.
                </p>
                <div id="responsesContent"></div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="hideResponsesModal()" style="width:100%;">Close</button>
            </div>
        </div>
    </div>

    <!-- â”€â”€ Password Reset Modal â”€â”€ -->
    <div id="passwordResetModal" class="modal-overlay hidden">
        <div class="modal-box" style="max-width:420px;">
            <div class="modal-header">
                <h3>ğŸ”‘ Reset Password</h3>
                <button class="modal-close" onclick="hidePasswordResetModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <p style="color:var(--text-muted);font-size:0.88rem;margin-bottom:20px;text-align:center;">
                    Enter your email address and we'll send a reset link.
                </p>
                <div class="field-group">
                    <label class="field-label" for="resetEmail">Email Address</label>
                    <input id="resetEmail" type="email" placeholder="Enter your registered email" class="field-input" required>
                </div>
            </div>
            <div class="modal-footer">
                <button id="sendResetBtn" class="btn-primary" style="flex:1;">
                    <span id="sendResetText">Send Reset Link</span>
                    <div id="sendResetSpinner" class="loading-spinner-small hidden" style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
                </button>
                <button id="cancelResetBtn" class="btn-secondary" onclick="hidePasswordResetModal()" style="width:auto;padding:12px 20px;">Cancel</button>
            </div>
            <div id="resetLoader" class="hidden text-center pb-4">
                <div class="loading-spinner mx-auto" style="width:28px;height:28px;"></div>
                <p class="mt-2 text-sm" style="color:var(--primary);">Sendingâ€¦</p>
            </div>
        </div>
    </div>

    <!-- â”€â”€ Add Student Modal â”€â”€ -->
    <div id="addStudentModal" class="modal-overlay hidden">
        <div class="modal-box modal-box-wide">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus" style="margin-right:6px;color:var(--accent);"></i> Add Another Student</h3>
                <button class="modal-close" onclick="hideAddStudentModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <p style="color:var(--text-muted);font-size:0.88rem;margin-bottom:20px;">
                    Enrol an additional child by filling in the details below.
                    They will appear in your dashboard as <strong>Pending Registration</strong>
                    and a staff member will confirm the details.
                </p>
                <div class="stepper">
                    <div class="step-item active" id="step-bar-1"></div>
                    <div class="step-item" id="step-bar-2"></div>
                    <div class="step-item" id="step-bar-3"></div>
                </div>

                <!-- Step 1: Basic Info -->
                <div class="step-panel active" id="add-step-1">
                    <h4 style="font-size:1rem;color:var(--green-deep);margin:0 0 16px;font-weight:700;">Step 1 â€” Student Information</h4>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
                        <div class="field-group" style="margin:0;">
                            <label class="field-label" for="newStudentName">Full Name *</label>
                            <input id="newStudentName" type="text" placeholder="Student's full name" class="field-input" required>
                        </div>
                        <div class="field-group" style="margin:0;">
                            <label class="field-label" for="newStudentGender">Gender *</label>
                            <select id="newStudentGender" class="field-input" required>
                                <option value="">Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                                <option value="prefer-not-to-say">Prefer not to say</option>
                            </select>
                        </div>
                        <div class="field-group" style="margin:0;">
                            <label class="field-label" for="newStudentDob">Date of Birth *</label>
                            <input id="newStudentDob" type="date" class="field-input" required>
                        </div>
                        <div class="field-group" style="margin:0;">
                            <label class="field-label" for="newStudentActualGrade">Current School Grade *</label>
                            <select id="newStudentActualGrade" class="field-input" required>
                                <option value="">Select grade</option>
                                <option value="preschool">Preschool</option>
                                <option value="kindergarten">Kindergarten</option>
                                <option value="grade1">Grade 1</option><option value="grade2">Grade 2</option>
                                <option value="grade3">Grade 3</option><option value="grade4">Grade 4</option>
                                <option value="grade5">Grade 5</option><option value="grade6">Grade 6</option>
                                <option value="grade7">Grade 7</option><option value="grade8">Grade 8</option>
                                <option value="grade9">Grade 9</option><option value="grade10">Grade 10</option>
                                <option value="grade11">Grade 11</option><option value="grade12">Grade 12</option>
                            </select>
                        </div>
                        <div class="field-group" style="margin:0;">
                            <label class="field-label" for="newStudentFeeGroup">Tuition Level *</label>
                            <select id="newStudentFeeGroup" class="field-input" required>
                                <option value="">Select level</option>
                                <option value="preschool">Preschool â€“ Grade 1</option>
                                <option value="grade2-4">Grade 2 â€“ 4</option>
                                <option value="grade5-8">Grade 5 â€“ 8</option>
                                <option value="grade9-12">Grade 9 â€“ 12</option>
                            </select>
                        </div>
                        <div class="field-group" style="margin:0;">
                            <label class="field-label" for="newStudentStartDate">Desired Start Date</label>
                            <input id="newStudentStartDate" type="date" class="field-input">
                        </div>
                    </div>
                </div>

                <!-- Step 2: Subjects & Schedule -->
                <div class="step-panel" id="add-step-2">
                    <h4 style="font-size:1rem;color:var(--green-deep);margin:0 0 16px;font-weight:700;">Step 2 â€” Subjects &amp; Schedule</h4>
                    <div class="field-group">
                        <label class="field-label">Academic Subjects (select all that apply)</label>
                        <div class="picker-grid" id="newStudentSubjects">
                            <span class="picker-chip" data-subject="Math" onclick="togglePickerChip(this)">Math</span>
                            <span class="picker-chip" data-subject="Language Arts" onclick="togglePickerChip(this)">Language Arts</span>
                            <span class="picker-chip" data-subject="Geography" onclick="togglePickerChip(this)">Geography</span>
                            <span class="picker-chip" data-subject="Science" onclick="togglePickerChip(this)">Science</span>
                            <span class="picker-chip" data-subject="Biology" onclick="togglePickerChip(this)">Biology</span>
                            <span class="picker-chip" data-subject="Physics" onclick="togglePickerChip(this)">Physics</span>
                            <span class="picker-chip" data-subject="Chemistry" onclick="togglePickerChip(this)">Chemistry</span>
                            <span class="picker-chip" data-subject="Microbiology" onclick="togglePickerChip(this)">Microbiology</span>
                        </div>
                    </div>
                    <div class="field-group">
                        <label class="field-label">Preferred Days (select at least one)</label>
                        <div class="picker-grid" id="newStudentDays">
                            <span class="picker-chip" data-day="Monday" onclick="togglePickerChip(this)">Mon</span>
                            <span class="picker-chip" data-day="Tuesday" onclick="togglePickerChip(this)">Tue</span>
                            <span class="picker-chip" data-day="Wednesday" onclick="togglePickerChip(this)">Wed</span>
                            <span class="picker-chip" data-day="Thursday" onclick="togglePickerChip(this)">Thu</span>
                            <span class="picker-chip" data-day="Friday" onclick="togglePickerChip(this)">Fri</span>
                            <span class="picker-chip" data-day="Saturday" onclick="togglePickerChip(this)">Sat</span>
                            <span class="picker-chip" data-day="Sunday" onclick="togglePickerChip(this)">Sun</span>
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
                        <div class="field-group" style="margin:0;">
                            <label class="field-label" for="newStudentStartHour">Class Start Time</label>
                            <select id="newStudentStartHour" class="field-input">
                                <option value="">Select hour</option>
                                <option value="7">7:00 AM</option><option value="8">8:00 AM</option>
                                <option value="9">9:00 AM</option><option value="10">10:00 AM</option>
                                <option value="11">11:00 AM</option><option value="12">12:00 PM</option>
                                <option value="13">1:00 PM</option><option value="14">2:00 PM</option>
                                <option value="15">3:00 PM</option><option value="16">4:00 PM</option>
                                <option value="17">5:00 PM</option><option value="18">6:00 PM</option>
                                <option value="19">7:00 PM</option><option value="20">8:00 PM</option>
                            </select>
                        </div>
                        <div class="field-group" style="margin:0;">
                            <label class="field-label" for="newStudentEndHour">Class End Time</label>
                            <select id="newStudentEndHour" class="field-input">
                                <option value="">Select hour</option>
                                <option value="8">8:00 AM</option><option value="9">9:00 AM</option>
                                <option value="10">10:00 AM</option><option value="11">11:00 AM</option>
                                <option value="12">12:00 PM</option><option value="13">1:00 PM</option>
                                <option value="14">2:00 PM</option><option value="15">3:00 PM</option>
                                <option value="16">4:00 PM</option><option value="17">5:00 PM</option>
                                <option value="18">6:00 PM</option><option value="19">7:00 PM</option>
                                <option value="20">8:00 PM</option><option value="21">9:00 PM</option>
                            </select>
                        </div>
                    </div>
                    <div class="field-group" style="margin-top:16px;">
                        <label class="field-label" for="newStudentSessions">Session Frequency *</label>
                        <select id="newStudentSessions" class="field-input">
                            <option value="">Select frequency</option>
                            <option value="twice">Twice weekly</option>
                            <option value="three">3x weekly</option>
                            <option value="five">5x weekly (daily)</option>
                        </select>
                    </div>
                    <div class="field-group">
                        <label class="field-label" for="newStudentTutor">Tutor Preference</label>
                        <select id="newStudentTutor" class="field-input">
                            <option value="">No preference</option>
                            <option value="male">Male tutor</option>
                            <option value="female">Female tutor</option>
                        </select>
                    </div>
                </div>

                <!-- Step 3: Review + Fee Summary -->
                <div class="step-panel" id="add-step-3">
                    <h4 style="font-size:1rem;color:var(--green-deep);margin:0 0 16px;font-weight:700;">Step 3 â€” Review &amp; Fee Estimate</h4>
                    <div id="addStudentReview"
                         style="background:var(--green-pale);border:1px solid var(--green-light);border-radius:12px;padding:20px;font-size:0.9rem;line-height:1.7;color:#374151;">
                    </div>
                    <!-- Fee Summary (populated by JS using enrollment portal logic) -->
                    <div id="addStudentFeeSummary" class="fee-summary" style="display:none;"></div>
                    <p style="margin-top:16px;font-size:0.82rem;color:var(--text-muted);">
                        â„¹ï¸ Your new student will be created as <strong>Pending Registration</strong>.
                        A staff member will review and confirm the enrolment details and final fee.
                    </p>
                </div>
            </div>
            <div class="modal-footer" style="justify-content:space-between;">
                <button id="addStudentPrevBtn" class="btn-secondary" onclick="addStudentPrev()" style="width:auto;padding:12px 24px;display:none;">â† Back</button>
                <div style="flex:1;"></div>
                <button id="addStudentNextBtn" class="btn-primary" onclick="addStudentNext()" style="width:auto;padding:12px 24px;">Next â†’</button>
                <button id="addStudentSubmitBtn" class="btn-primary hidden" onclick="submitNewStudent()" style="width:auto;padding:12px 24px;">
                    <span id="addStudentSubmitText">âœ… Submit Enrolment</span>
                    <div id="addStudentSubmitSpinner" class="loading-spinner-small hidden" style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- â”€â”€ Privacy Policy Modal â”€â”€ -->
    <div id="privacyModal" class="modal-overlay hidden">
        <div class="modal-box modal-box-wide">
            <div class="modal-header">
                <h3 id="privacyModalTitle">ğŸ”’ Privacy Policy</h3>
                <button class="modal-close" onclick="hidePrivacyModal()">Ã—</button>
            </div>
            <div class="modal-body" id="privacyModalBody"></div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="hidePrivacyModal()" style="max-width:180px;">I Understand</button>
            </div>
        </div>
    </div>

    <!-- Set today's date -->
    <script>
    (function() {
        var dateEl = document.getElementById('currentDate');
        if (dateEl) {
            var now = new Date();
            dateEl.innerText = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }
    })();

    // FAB toggle
    function toggleFabMenu() {
        var menu = document.getElementById('fabMenu');
        var icon = document.getElementById('fabIcon');
        if (menu.classList.contains('open')) {
            menu.classList.remove('open');
            icon.className = 'fas fa-comment-alt';
        } else {
            menu.classList.add('open');
            icon.className = 'fas fa-times';
        }
    }
    function closeFabMenu() {
        var menu = document.getElementById('fabMenu');
        var icon = document.getElementById('fabIcon');
        menu.classList.remove('open');
        icon.className = 'fas fa-comment-alt';
    }
    // Close FAB when clicking outside
    document.addEventListener('click', function(e) {
        var fab = document.getElementById('fabContainer');
        if (fab && !fab.contains(e.target)) closeFabMenu();
    });
    </script>

    <!-- Load the parent portal JS -->
    <script src="parent-portal.js"></script>
</body>
</html>
