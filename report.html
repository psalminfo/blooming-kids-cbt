<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Assessment Report</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100 text-gray-800">
  <div class="max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-xl mt-10" id="reportContent">
    <header class="border-b border-gray-300 pb-4 mb-6">
      <h1 class="text-2xl font-bold text-green-700">BLOOMING KIDS HOUSE ASSESSMENT REPORT</h1>
      <p class="text-sm text-gray-600">Comprehensive Evaluation of Academic Performance</p>
    </header>

    <section class="mb-6">
      <h2 class="text-lg font-semibold text-yellow-600">Student Information</h2>
      <p><strong>Name:</strong> <span id="studentName">-</span></p>
      <p><strong>Grade:</strong> <span id="studentGrade">-</span></p>
      <p><strong>Location:</strong> <span id="studentLocation">-</span></p>
      <p><strong>Tutor Name:</strong> <span id="tutorName">-</span></p>
    </section>

    <section class="mb-6">
      <h2 class="text-lg font-semibold text-yellow-600">Subjects Taken</h2>
      <ul class="list-disc list-inside text-sm" id="subjectsList">
        <!-- Populated dynamically -->
      </ul>
    </section>

    <section class="mb-6">
      <h2 class="text-lg font-semibold text-yellow-600">Performance Summary</h2>
      <div id="performanceSummary" class="text-sm">
        <!-- Populated dynamically -->
      </div>
    </section>

    <section class="mb-6">
      <h2 class="text-lg font-semibold text-yellow-600">Recommendations</h2>
      <div id="recommendations" class="text-sm">
        <!-- Populated dynamically -->
      </div>
    </section>

    <section class="mb-6">
      <h2 class="text-lg font-semibold text-yellow-600">Message from the Director</h2>
      <p class="text-sm leading-relaxed">
        Dear Parent/Guardian,
        <br><br>
        Thank you for trusting Blooming Kids House to assess your child's academic abilities. This report provides an in-depth insight into your child's performance based on core curriculum standards. Our goal is to support continuous academic excellence.
        <br><br>
        Based on these results, we highly recommend our tutoring sessions which are carefully designed to bridge gaps, reinforce key concepts, and accelerate progress. Your child will be personally supported by their assigned tutor, <span class="font-medium" id="tutorMention"></span>, to ensure improvement in specific curriculum areas.
        <br><br>
        Best regards,
        <br>
        <strong>Mrs. Oladoyin Temitope</strong><br>
        Director, Blooming Kids House
      </p>
    </section>

    <footer class="border-t pt-4 text-xs text-center text-gray-500 mt-6">
      POWERED BY <span style="color:#FFEB3B">POG</span>
    </footer>
  </div>

  <div class="flex justify-center mt-6 space-x-4">
    <button onclick="downloadPDF()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Download PDF</button>
    <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Logout</button>
  </div>

  <script type="module" src="generateReport.js"></script>
  <script>
    function downloadPDF() {
      const report = document.getElementById("reportContent");
      html2canvas(report).then(canvas => {
        const imgData = canvas.toDataURL("image/png");
        const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
        const imgProps = pdf.getImageProperties(imgData);
        const pdfWidth = pdf.internal.pageSize.getWidth();
        const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
        pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
        pdf.save("assessment_report.pdf");
      });
    }

    function logout() {
      window.location.href = "parent.html";
    }
  </script>
</body>

</html>
