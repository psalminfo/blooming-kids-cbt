<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <title>Parent Portal â€” Blooming Kids House</title>

    <!-- Google Fonts: DM Sans + Playfair Display -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" />
    <link rel="icon" href="favicon.ico" />

    <!-- Firebase compat SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

    <!-- Firebase Compat Bridge â€” must complete synchronously before parent.js runs -->
    <script>
    (function () {
        var hostname = window.location.hostname;
        var isDev =
            hostname === 'localhost' ||
            hostname === '127.0.0.1' ||
            hostname.includes('bkhdevelop.netlify.app');

        var mainConfig = {
            apiKey:            'AIzaSyD1lJhsWMMs_qerLBSzk7wKhjLyI_11RJg',
            authDomain:        'bloomingkidsassessment.firebaseapp.com',
            projectId:         'bloomingkidsassessment',
            storageBucket:     'bloomingkidsassessment.appspot.com',
            messagingSenderId: '238975054977',
            appId:             '1:238975054977:web:87c70b4db044998a204980'
        };

        var devConfig = {
            apiKey:            'AIzaSyAu36oLPNsk0TPKVIwCzEHe9oOtJ7cZQXA',
            authDomain:        'blooming-kids-dev.firebaseapp.com',
            projectId:         'blooming-kids-dev',
            storageBucket:     'blooming-kids-dev.firebasestorage.app',
            messagingSenderId: '336022609689',
            appId:             '1:336022609689:web:ad5a0a74dcac011f21ef88'
        };

        var config = isDev ? devConfig : mainConfig;
        window.firebaseConfig = config;

        var APP_NAME = 'parent-portal';
        var app;
        try {
            app = firebase.app(APP_NAME);
        } catch (e) {
            app = firebase.initializeApp(config, APP_NAME);
        }

        var authInst = firebase.auth(app);
        authInst
            .setPersistence(firebase.auth.Auth.Persistence.SESSION)
            .catch(function (err) {
                console.warn('Parent portal: could not set auth persistence:', err.message);
            });

        window.db      = firebase.firestore(app);
        window.auth    = authInst;
        window.storage = firebase.storage(app);

        console.log('ğŸ”— Parent portal compat bridge ready |', isDev ? 'ğŸ› ï¸ DEVELOPMENT' : 'ğŸš€ PRODUCTION');
    })();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/libphonenumber-js@1.9.6/bundle/libphonenumber-js.min.js"></script>

    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DESIGN TOKENS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --green-deep:   #1B5E20;
            --green-primary:#2E7D32;
            --green-medium: #388E3C;
            --green-light:  #C8E6C9;
            --green-pale:   #E8F5E9;
            --yellow-gold:  #F9A825;
            --yellow-light: #FFF8E1;
            --black-rich:   #1A1A1A;
            --black-mid:    #2D2D2D;
            --gray-soft:    #F5F7F4;
            --gray-mid:     #E0E5DF;
            --white:        #FFFFFF;
            --shadow-sm:    0 2px 8px rgba(27,94,32,0.08);
            --shadow-md:    0 8px 24px rgba(27,94,32,0.12);
            --shadow-lg:    0 20px 48px rgba(27,94,32,0.16);
            --radius-card:  16px;
            --radius-pill:  100px;
            --radius-sm:    8px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BASE STYLES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        *, *::before, *::after { box-sizing: border-box; }

        body {
            font-family: 'DM Sans', -apple-system, sans-serif;
            background: var(--green-pale);
            color: var(--black-rich);
            min-height: 100vh;
            margin: 0;
        }

        h1, h2, h3 {
            font-family: 'Playfair Display', Georgia, serif;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LEAF PATTERN BACKGROUND
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background-image:
                radial-gradient(circle at 20% 80%, rgba(46,125,50,0.06) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(249,168,37,0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(200,230,201,0.15) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        #appRoot { position: relative; z-index: 1; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           UTILITY CLASSES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .hidden { display: none !important; }

        .card {
            background: var(--white);
            border-radius: var(--radius-card);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-mid);
        }

        .card-elevated {
            background: var(--white);
            border-radius: var(--radius-card);
            box-shadow: var(--shadow-md);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE HEADER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .portal-header {
            background: var(--white);
            border-bottom: 2px solid var(--green-light);
            padding: 0 24px;
            height: 72px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 12px rgba(27,94,32,0.10);
        }

        .portal-logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .portal-logo img {
            height: 44px;
            width: auto;
            filter: drop-shadow(0 2px 4px rgba(46,125,50,0.2));
        }

        .portal-logo-text h1 {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--green-primary);
            line-height: 1.2;
            font-family: 'Playfair Display', serif;
        }

        .portal-logo-text p {
            font-size: 0.72rem;
            color: var(--green-medium);
            line-height: 1;
            font-family: 'DM Sans', sans-serif;
            letter-spacing: 0.03em;
        }

        .portal-header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .btn-logout {
            background: #FEE2E2;
            color: #B91C1C;
            border: none;
            padding: 8px 16px;
            border-radius: var(--radius-pill);
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-logout:hover {
            background: #FCA5A5;
            transform: translateY(-1px);
        }

        .header-greeting {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--green-deep);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AUTH SCREEN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .auth-screen {
            min-height: calc(100vh - 72px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 32px 16px;
        }

        .auth-card {
            width: 100%;
            max-width: 460px;
            background: var(--white);
            border-radius: 24px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        .auth-card-hero {
            background: linear-gradient(135deg, var(--green-primary) 0%, var(--green-deep) 100%);
            padding: 32px;
            text-align: center;
        }

        .auth-card-hero img {
            height: 56px;
            width: auto;
            filter: brightness(0) invert(1);
            margin-bottom: 12px;
        }

        .auth-card-hero h2 {
            color: white;
            font-size: 1.5rem;
            margin: 0;
        }

        .auth-card-hero p {
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
            margin-top: 6px;
            font-family: 'DM Sans', sans-serif;
        }

        .auth-tabs {
            display: flex;
            background: var(--green-pale);
            border-bottom: 1px solid var(--green-light);
        }

        .auth-tab-btn {
            flex: 1;
            padding: 14px;
            font-size: 0.9rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .auth-tab-btn.active {
            background: var(--green-primary);
            color: white;
        }

        .auth-tab-btn:not(.active) {
            background: transparent;
            color: var(--green-primary);
        }

        .auth-tab-btn:not(.active):hover {
            background: var(--green-light);
        }

        .auth-form-body {
            padding: 32px;
        }

        .field-group {
            margin-bottom: 18px;
        }

        .field-label {
            display: block;
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--black-mid);
            margin-bottom: 6px;
            letter-spacing: 0.02em;
            text-transform: uppercase;
        }

        .field-input {
            width: 100%;
            padding: 12px 16px;
            border: 1.5px solid var(--gray-mid);
            border-radius: var(--radius-sm);
            font-size: 0.95rem;
            font-family: 'DM Sans', sans-serif;
            color: var(--black-rich);
            background: var(--white);
            transition: all 0.2s;
            outline: none;
        }

        .field-input:focus {
            border-color: var(--green-primary);
            box-shadow: 0 0 0 3px rgba(46,125,50,0.12);
        }

        .field-input::placeholder { color: #9E9E9E; }

        .btn-primary {
            width: 100%;
            padding: 14px;
            background: var(--green-primary);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-weight: 700;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary:hover {
            background: var(--green-deep);
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(46,125,50,0.3);
        }

        .btn-primary:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            width: 100%;
            padding: 12px;
            background: var(--gray-soft);
            color: var(--black-mid);
            border: 1.5px solid var(--gray-mid);
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: var(--gray-mid);
        }

        .btn-yellow {
            background: var(--yellow-gold);
            color: var(--black-rich);
            border: none;
            padding: 10px 20px;
            border-radius: var(--radius-pill);
            font-size: 0.88rem;
            font-weight: 700;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 3px 10px rgba(249,168,37,0.35);
        }

        .btn-yellow:hover {
            background: #F57F17;
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(249,168,37,0.45);
        }

        .forgot-link {
            background: none;
            border: none;
            color: var(--green-primary);
            font-size: 0.85rem;
            cursor: pointer;
            font-family: 'DM Sans', sans-serif;
            text-decoration: underline;
            text-decoration-color: transparent;
            transition: all 0.2s;
        }

        .forgot-link:hover {
            text-decoration-color: var(--green-primary);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DASHBOARD LAYOUT
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .dashboard-layout {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px 16px 48px;
        }

        .dashboard-welcome-bar {
            background: linear-gradient(135deg, var(--green-primary) 0%, var(--green-deep) 100%);
            border-radius: var(--radius-card);
            padding: 24px 32px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 16px;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .dashboard-welcome-bar::after {
            content: 'ğŸŒ¿';
            position: absolute;
            right: 20px;
            bottom: -10px;
            font-size: 4rem;
            opacity: 0.15;
            transform: rotate(-20deg);
            pointer-events: none;
        }

        .welcome-text h2 {
            color: white;
            font-size: 1.4rem;
            margin: 0 0 4px;
        }

        .welcome-text p {
            color: rgba(255,255,255,0.8);
            font-size: 0.88rem;
            margin: 0;
            font-family: 'DM Sans', sans-serif;
        }

        .welcome-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn-header-action {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1.5px solid rgba(255,255,255,0.4);
            padding: 9px 18px;
            border-radius: var(--radius-pill);
            font-size: 0.85rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-header-action:hover {
            background: rgba(255,255,255,0.35);
            transform: translateY(-1px);
        }

        .btn-add-student {
            background: var(--yellow-gold);
            color: var(--black-rich);
            border: none;
            padding: 10px 20px;
            border-radius: var(--radius-pill);
            font-size: 0.88rem;
            font-weight: 700;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .btn-add-student:hover {
            background: #F57F17;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(0,0,0,0.25);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MAIN TAB NAVIGATION
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .main-tabs {
            display: flex;
            background: var(--white);
            border-radius: var(--radius-card);
            padding: 6px;
            gap: 4px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-mid);
        }

        .main-tab-btn {
            flex: 1;
            padding: 12px 8px;
            border: none;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            color: #6B7280;
            background: transparent;
        }

        .main-tab-btn.active {
            background: var(--green-primary);
            color: white;
            box-shadow: 0 3px 8px rgba(46,125,50,0.3);
        }

        .main-tab-btn:not(.active):hover {
            background: var(--green-pale);
            color: var(--green-primary);
        }

        .tab-icon { font-size: 1.1rem; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONTENT AREAS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .content-area { animation: fadeUp 0.3s ease; }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(8px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        .content-header {
            margin-bottom: 20px;
        }

        .content-header h2 {
            font-size: 1.5rem;
            color: var(--green-deep);
            margin: 0 0 4px;
        }

        .content-header p {
            color: #6B7280;
            font-size: 0.88rem;
            margin: 0;
            font-family: 'DM Sans', sans-serif;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LOADING STATES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .loading-spinner {
            border: 3px solid rgba(46,125,50,0.15);
            border-top: 3px solid var(--green-primary);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 0.8s linear infinite;
            display: inline-block;
        }

        .loading-spinner-small {
            border: 2px solid rgba(46,125,50,0.15);
            border-top: 2px solid var(--green-primary);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 0.8s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0%   { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 6px;
        }

        @keyframes shimmer {
            0%   { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ACCORDION COMPONENTS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .accordion-header {
            background: var(--white);
            border: 1px solid var(--gray-mid);
            border-radius: var(--radius-card);
            padding: 20px 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.2s;
            box-shadow: var(--shadow-sm);
        }

        .accordion-header:hover {
            border-color: var(--green-light);
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .accordion-content {
            overflow: hidden;
            transition: max-height 0.35s cubic-bezier(0.4,0,0.2,1), opacity 0.3s ease;
        }

        .accordion-content.hidden {
            max-height: 0 !important;
            opacity: 0;
        }

        .accordion-content:not(.hidden) {
            max-height: 8000px;
            opacity: 1;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           REPORT CARDS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .student-report-card {
            background: var(--white);
            border-radius: var(--radius-card);
            border: 1px solid var(--gray-mid);
            overflow: hidden;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            transition: box-shadow 0.2s;
        }

        .student-report-card:hover {
            box-shadow: var(--shadow-md);
        }

        .student-report-card-header {
            background: linear-gradient(to right, var(--green-pale), var(--white));
            padding: 20px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            border-bottom: 1px solid var(--gray-mid);
        }

        .student-avatar {
            width: 44px;
            height: 44px;
            background: var(--green-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            margin-right: 14px;
            flex-shrink: 0;
        }

        .student-card-meta h3 {
            font-size: 1.05rem;
            font-weight: 700;
            color: var(--green-deep);
            margin: 0 0 3px;
        }

        .student-card-meta p {
            font-size: 0.8rem;
            color: #6B7280;
            margin: 0;
            font-family: 'DM Sans', sans-serif;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: var(--radius-pill);
            font-size: 0.75rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
        }

        .badge-green  { background: #DCFCE7; color: #166534; }
        .badge-yellow { background: #FEF9C3; color: #854D0E; }
        .badge-red    { background: #FEE2E2; color: #991B1B; }
        .badge-blue   { background: #DBEAFE; color: #1E3A8A; }
        .badge-gray   { background: #F3F4F6; color: #4B5563; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PERFORMANCE GRADES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .grade-circle {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            font-weight: 700;
            font-family: 'DM Sans', sans-serif;
        }

        .grade-a { background: #DCFCE7; color: #166534; }
        .grade-b { background: #DBEAFE; color: #1E3A8A; }
        .grade-c { background: #FEF9C3; color: #854D0E; }
        .grade-f { background: #FEE2E2; color: #991B1B; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DOWNLOAD BUTTON
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .btn-download {
            background: var(--green-primary);
            color: white;
            border: none;
            padding: 9px 18px;
            border-radius: var(--radius-pill);
            font-size: 0.83rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn-download:hover {
            background: var(--green-deep);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(46,125,50,0.3);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TOAST MESSAGES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .message-toast {
            position: fixed;
            top: 84px;
            right: 16px;
            padding: 14px 20px;
            border-radius: var(--radius-sm);
            color: white;
            font-weight: 500;
            font-family: 'DM Sans', sans-serif;
            z-index: 9999;
            max-width: 340px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            animation: slideInRight 0.3s ease;
            font-size: 0.9rem;
        }

        @keyframes slideInRight {
            from { transform: translateX(120%); opacity: 0; }
            to   { transform: translateX(0); opacity: 1; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MODAL OVERLAY
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.55);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 16px;
        }

        .modal-box {
            background: var(--white);
            border-radius: 20px;
            width: 100%;
            max-width: 580px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 32px 72px rgba(0,0,0,0.25);
            animation: modalIn 0.3s cubic-bezier(0.4,0,0.2,1);
        }

        .modal-box-wide {
            max-width: 720px;
        }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.95) translateY(10px); }
            to   { opacity: 1; transform: scale(1) translateY(0); }
        }

        .modal-header {
            padding: 24px 28px 20px;
            border-bottom: 1px solid var(--gray-mid);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-header h3 {
            font-size: 1.25rem;
            color: var(--green-deep);
            margin: 0;
        }

        .modal-close {
            background: var(--gray-soft);
            border: none;
            border-radius: 50%;
            width: 34px;
            height: 34px;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6B7280;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--gray-mid);
            color: var(--black-rich);
        }

        .modal-body {
            padding: 24px 28px;
        }

        .modal-footer {
            padding: 16px 28px 24px;
            display: flex;
            gap: 10px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ADD STUDENT MODAL STEPPER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .stepper {
            display: flex;
            gap: 8px;
            margin-bottom: 28px;
        }

        .step-item {
            flex: 1;
            height: 4px;
            border-radius: 2px;
            background: var(--gray-mid);
            transition: background 0.3s;
        }

        .step-item.active   { background: var(--green-primary); }
        .step-item.done     { background: var(--green-medium); }

        .step-panel { display: none; }
        .step-panel.active { display: block; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DAYS / SUBJECTS PICKER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .picker-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .picker-chip {
            padding: 7px 14px;
            border: 1.5px solid var(--gray-mid);
            border-radius: var(--radius-pill);
            font-size: 0.82rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.15s;
            background: var(--white);
            color: #4B5563;
        }

        .picker-chip:hover {
            border-color: var(--green-medium);
            color: var(--green-primary);
        }

        .picker-chip.selected {
            background: var(--green-primary);
            border-color: var(--green-primary);
            color: white;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCHEDULE / INFO TILES IN ACADEMICS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .info-tile {
            background: var(--green-pale);
            border: 1px solid var(--green-light);
            border-radius: 10px;
            padding: 12px 16px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .info-tile-icon {
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .info-tile-text h5 {
            font-size: 0.78rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--green-deep);
            margin: 0 0 2px;
        }

        .info-tile-text p {
            font-size: 0.88rem;
            color: var(--black-mid);
            margin: 0;
            font-family: 'DM Sans', sans-serif;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           REWARDS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .referral-code-box {
            background: linear-gradient(135deg, var(--green-deep), var(--green-primary));
            border-radius: var(--radius-card);
            padding: 28px;
            color: white;
            margin-bottom: 24px;
        }

        .referral-code-display {
            font-family: 'Courier New', monospace;
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: 0.12em;
            background: rgba(255,255,255,0.15);
            padding: 12px 20px;
            border-radius: 10px;
            display: inline-block;
            border: 1.5px dashed rgba(255,255,255,0.5);
            user-select: all;
            cursor: text;
        }

        .stat-card {
            background: var(--white);
            border-radius: var(--radius-card);
            padding: 20px;
            border: 1px solid var(--gray-mid);
            box-shadow: var(--shadow-sm);
        }

        .stat-card-value {
            font-size: 2rem;
            font-weight: 700;
            font-family: 'Playfair Display', serif;
            color: var(--green-deep);
        }

        .stat-card-label {
            font-size: 0.8rem;
            color: #6B7280;
            font-weight: 500;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           NOTIFICATION BADGE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .notification-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: #EF4444;
            color: white;
            border-radius: 50%;
            font-size: 0.65rem;
            font-weight: 700;
            min-width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FOOTER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .portal-footer {
            text-align: center;
            padding: 32px 16px;
            margin-top: 32px;
        }

        .portal-footer p {
            font-size: 0.82rem;
            color: #6B7280;
            font-family: 'DM Sans', sans-serif;
            margin: 0;
        }

        .portal-footer-links {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 10px;
        }

        .portal-footer-link {
            font-size: 0.82rem;
            color: var(--green-primary);
            font-family: 'DM Sans', sans-serif;
            text-decoration: none;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            transition: color 0.2s;
        }

        .portal-footer-link:hover {
            color: var(--green-deep);
            text-decoration: underline;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PRIVACY POLICY MODAL CONTENT
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .policy-section {
            margin-bottom: 20px;
        }

        .policy-section h4 {
            font-size: 1rem;
            color: var(--green-deep);
            margin: 0 0 8px;
        }

        .policy-section p {
            font-size: 0.88rem;
            line-height: 1.6;
            color: #4B5563;
            font-family: 'DM Sans', sans-serif;
            margin: 0;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CUSTOM SCROLLBAR
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--green-light); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--green-medium); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSE BUBBLE (Feedback)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .response-bubble {
            background: var(--green-pale);
            border: 1px solid var(--green-light);
            border-radius: 10px;
            padding: 12px 16px;
            margin-top: 10px;
        }

        .response-header {
            font-weight: 700;
            color: var(--green-deep);
            font-size: 0.85rem;
            margin-bottom: 4px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PRESERVE WHITESPACE FOR MESSAGES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .preserve-whitespace {
            white-space: pre-wrap;
            word-break: break-word;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TAB ACTIVE/INACTIVE (legacy compatibility)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .tab-active      { background-color: var(--green-primary); color: white; }
        .tab-inactive    { background-color: var(--green-pale); color: var(--green-primary); }
        .tab-active-main { background-color: var(--green-primary); color: white; }
        .tab-inactive-main { background-color: var(--green-pale); color: var(--green-primary); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SKELETON LOADERS (legacy)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .skeleton-text   { height: 1em; margin-bottom: 0.5em; }
        .skeleton-title  { height: 1.8em; margin-bottom: 1em; width: 70%; }
        .skeleton-card   { height: 150px; border-radius: 8px; margin-bottom: 1rem; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           INPUT FOCUS (legacy compatibility)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .input-focus:focus {
            box-shadow: 0 0 0 3px rgba(46,125,50,0.12);
            border-color: var(--green-primary);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PROGRESS ACCORDION (legacy compatibility)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .progress-accordion-content { transition: all 0.4s ease; overflow: hidden; }
        .progress-accordion-content.hidden { max-height: 0 !important; opacity: 0; }
        .progress-accordion-content:not(.hidden) { max-height: 5000px; opacity: 1; }

        /* Topic / Homework items (academics) */
        .topic-item {
            transition: all 0.2s;
            border-left: 4px solid #3b82f6;
        }
        .topic-item:hover { transform: translateX(4px); }

        .homework-item {
            transition: all 0.2s;
            border-left: 4px solid #8b5cf6;
        }
        .homework-item:hover { transform: translateX(4px); }

        .status-overdue   { background: #fef2f2; color: #dc2626; }
        .status-pending   { background: #eff6ff; color: #1d4ed8; }
        .status-submitted { background: #f0fdf4; color: #15803d; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 640px) {
            .dashboard-welcome-bar { padding: 20px; }
            .main-tab-btn span.tab-label { display: none; }
            .portal-header { padding: 0 12px; }
            .modal-body, .modal-header, .modal-footer { padding-left: 16px; padding-right: 16px; }
        }

        /* Slide down animation */
        .slide-down {
            animation: slideDown 0.3s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-8px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* Fade in (legacy) */
        .fade-in {
            animation: fadeIn 0.4s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to   { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
<div id="appRoot">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         GLOBAL HEADER
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <header class="portal-header">
        <div class="portal-logo">
            <img src="https://res.cloudinary.com/dy2hxcyaf/image/upload/v1757700806/newbhlogo_umwqzy.svg"
                 alt="Blooming Kids House Logo">
            <div class="portal-logo-text">
                <h1>Blooming Kids House</h1>
                <p>Parent Portal</p>
            </div>
        </div>

        <!-- Header actions (shown only when logged in) -->
        <div class="portal-header-actions" id="headerActions" style="display:none;">
            <span class="header-greeting" id="headerGreeting">Welcome!</span>
            <button onclick="logout()" class="btn-logout">
                ğŸšª <span>Logout</span>
            </button>
        </div>
    </header>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         AUTH SCREEN
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="authArea" class="auth-screen">
        <div class="auth-card">
            <!-- Hero Banner -->
            <div class="auth-card-hero">
                <img src="https://res.cloudinary.com/dy2hxcyaf/image/upload/v1757700806/newbhlogo_umwqzy.svg"
                     alt="BKH Logo">
                <h2>Welcome Back</h2>
                <p>Secure access to your children's progress</p>
            </div>

            <!-- Auth Tabs -->
            <div class="auth-tabs">
                <button id="signInTab" class="auth-tab-btn active" onclick="switchTab('signin')">Sign In</button>
                <button id="signUpTab" class="auth-tab-btn" onclick="switchTab('signup')">Sign Up</button>
            </div>

            <!-- Sign In Form -->
            <div class="auth-form-body" id="signInForm">
                <div class="field-group">
                    <label class="field-label" for="loginIdentifier">Phone Number or Email</label>
                    <input id="loginIdentifier" type="text"
                           placeholder="Enter your phone or email"
                           class="field-input" required>
                </div>
                <div class="field-group">
                    <label class="field-label" for="loginPassword">Password</label>
                    <input id="loginPassword" type="password"
                           placeholder="Enter your password"
                           class="field-input" required>
                </div>
                <div class="flex items-center mb-4">
                    <input id="rememberMe" type="checkbox"
                           class="h-4 w-4 rounded" style="accent-color: var(--green-primary)">
                    <label for="rememberMe" class="ml-2 text-sm text-gray-600" style="font-family:'DM Sans',sans-serif">
                        Remember me
                    </label>
                </div>
                <button id="signInBtn" class="btn-primary">
                    <span id="signInText">Sign In</span>
                    <div id="signInSpinner" class="loading-spinner-small hidden"
                         style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
                </button>
                <div class="text-center mt-3">
                    <button id="forgotPasswordBtn" class="forgot-link">Forgot Password?</button>
                </div>
            </div>

            <!-- Sign Up Form -->
            <div class="auth-form-body hidden" id="signUpForm">
                <div id="phoneInputContainer">
                    <div class="field-group">
                        <label class="field-label" for="signupPhone">Phone Number</label>
                        <input id="signupPhone" type="tel"
                               placeholder="Enter your phone number"
                               class="field-input" required>
                    </div>
                </div>
                <div class="field-group">
                    <label class="field-label" for="signupEmail">Email Address</label>
                    <input id="signupEmail" type="email"
                           placeholder="Enter your email address"
                           class="field-input" required>
                </div>
                <div class="field-group">
                    <label class="field-label" for="signupPassword">Password</label>
                    <input id="signupPassword" type="password"
                           placeholder="Minimum 6 characters"
                           class="field-input" required minlength="6">
                </div>
                <div class="field-group">
                    <label class="field-label" for="signupConfirmPassword">Confirm Password</label>
                    <input id="signupConfirmPassword" type="password"
                           placeholder="Confirm your password"
                           class="field-input" required minlength="6">
                </div>
                <button id="signUpBtn" class="btn-primary">
                    <span id="signUpText">Create Account</span>
                    <div id="signUpSpinner" class="loading-spinner-small hidden"
                         style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
                </button>
            </div>

            <!-- Auth Loader -->
            <div id="authLoader" class="hidden text-center pb-6">
                <div class="loading-spinner mx-auto" style="width:32px;height:32px;"></div>
                <p class="mt-2 text-sm" style="color:var(--green-primary);font-family:'DM Sans',sans-serif">
                    Processingâ€¦ please wait
                </p>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         DASHBOARD (shown when authenticated)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="reportArea" class="hidden dashboard-layout">

        <!-- Welcome Banner -->
        <div class="dashboard-welcome-bar">
            <div class="welcome-text">
                <h2 id="welcomeMessage">Welcome!</h2>
                <p>Thank you for being part of the Blooming Kids House family ğŸŒ¿</p>
            </div>
            <div class="welcome-actions">
                <!-- Add Another Student button -->
                <button class="btn-add-student" onclick="showAddStudentModal()">
                    â• <span>Add Student</span>
                </button>
                <!-- Feedback button -->
                <button class="btn-header-action" onclick="showFeedbackModal()">
                    ğŸ’¬ <span>Feedback</span>
                </button>
                <!-- Admin Responses button -->
                <div class="relative" style="position:relative;display:inline-block;">
                    <button class="btn-header-action" onclick="showResponsesModal()">
                        ğŸ“¨ <span>Messages</span>
                    </button>
                </div>
                <button onclick="logout()" class="btn-header-action"
                        style="background:rgba(239,68,68,0.25);border-color:rgba(239,68,68,0.5);">
                    ğŸšª <span>Logout</span>
                </button>
            </div>
        </div>

        <!-- Main Tab Navigation -->
        <nav class="main-tabs">
            <button id="reportTab" class="main-tab-btn active" onclick="switchMainTab('report')">
                <span class="tab-icon">ğŸ“„</span>
                <span class="tab-label">Progress Reports</span>
            </button>
            <button id="academicsTab" class="main-tab-btn" onclick="switchMainTab('academics')">
                <span class="tab-icon">ğŸ“š</span>
                <span class="tab-label">Academics</span>
            </button>
            <button id="rewardsTab" class="main-tab-btn" onclick="switchMainTab('rewards')">
                <span class="tab-icon">ğŸ</span>
                <span class="tab-label">Rewards</span>
            </button>
        </nav>

        <!-- â”€â”€â”€ Progress Reports Content â”€â”€â”€ -->
        <div id="reportContentArea" class="content-area">
            <div class="content-header">
                <h2>Children's Progress Reports</h2>
                <p>Click on a student's card to expand their reports</p>
            </div>

            <div id="reportsLoading" class="hidden text-center py-12">
                <div class="loading-spinner mx-auto" style="width:40px;height:40px;"></div>
                <p class="mt-4 text-sm" style="color:var(--green-primary);font-family:'DM Sans',sans-serif">
                    Loading reportsâ€¦
                </p>
            </div>

            <div id="reportsEmpty" class="hidden text-center py-16 card" style="padding:48px;">
                <div style="font-size:3.5rem;margin-bottom:16px;">ğŸ“¬</div>
                <h3 style="font-size:1.15rem;font-weight:700;color:#374151;margin:0 0 8px;">No Reports Available</h3>
                <p style="color:#6B7280;font-size:0.88rem;font-family:'DM Sans',sans-serif;max-width:360px;margin:0 auto;">
                    No progress reports are available at this time. Check back after your child's sessions.
                </p>
            </div>

            <div id="reportContent" class="space-y-4"></div>
        </div>

        <!-- â”€â”€â”€ Academics Content â”€â”€â”€ -->
        <div id="academicsContentArea" class="content-area hidden">
            <div class="content-header">
                <h2>Academic Progress &amp; Assignments</h2>
                <p>Subjects, schedule, session topics, and homework</p>
            </div>

            <div id="academicsStudentDropdown" class="mb-5"></div>
            <div id="academicsContent" class="card" style="padding:24px;min-height:300px;"></div>
        </div>

        <!-- â”€â”€â”€ Rewards Content â”€â”€â”€ -->
        <div id="rewardsContentArea" class="content-area hidden">
            <div class="content-header">
                <h2>Referral Rewards Dashboard</h2>
                <p>Track your earnings and referral history</p>
            </div>
            <div id="rewardsContent" class="card" style="padding:24px;min-height:300px;"></div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         FOOTER
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <footer class="portal-footer">
        <p>Â© 2025 Blooming Kids House Â· Where Every Child Blossoms ğŸŒ±</p>
        <div class="portal-footer-links">
            <button class="portal-footer-link" onclick="showPrivacyModal()">Privacy Policy</button>
            <span style="color:#D1D5DB;">|</span>
            <button class="portal-footer-link" onclick="showPrivacyModal('terms')">Terms of Use</button>
            <span style="color:#D1D5DB;">|</span>
            <a href="mailto:support@bloomingkidshouse.com" class="portal-footer-link">Contact Support</a>
        </div>
    </footer>

</div><!-- /appRoot -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODALS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<!-- â”€â”€ Feedback Modal â”€â”€ -->
<div id="feedbackModal" class="modal-overlay hidden">
    <div class="modal-box">
        <div class="modal-header">
            <h3>ğŸ’¬ Send Feedback</h3>
            <button class="modal-close" onclick="hideFeedbackModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <p style="color:#6B7280;font-size:0.88rem;font-family:'DM Sans',sans-serif;margin-bottom:20px;">
                We value your feedback! Please fill in the details below.
            </p>
            <div class="field-group">
                <label class="field-label" for="feedbackCategory">Category *</label>
                <select id="feedbackCategory" class="field-input" required>
                    <option value="">Select category</option>
                    <option value="Feedback">General Feedback</option>
                    <option value="Request">Special Request</option>
                    <option value="Complaint">Complaint</option>
                    <option value="Suggestion">Suggestion</option>
                </select>
            </div>
            <div class="field-group">
                <label class="field-label" for="feedbackPriority">Priority *</label>
                <select id="feedbackPriority" class="field-input" required>
                    <option value="">Select priority</option>
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                    <option value="Urgent">Urgent</option>
                </select>
            </div>
            <div class="field-group">
                <label class="field-label" for="feedbackStudent">Regarding Student *</label>
                <select id="feedbackStudent" class="field-input" required>
                    <option value="">Select student</option>
                </select>
            </div>
            <div class="field-group">
                <label class="field-label" for="feedbackMessage">Your Message *</label>
                <textarea id="feedbackMessage" rows="5" class="field-input preserve-whitespace"
                          placeholder="Describe your feedbackâ€¦" required style="resize:vertical;"></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button id="submitFeedbackBtn" class="btn-primary" onclick="submitFeedback()" style="flex:1;">
                <span id="submitFeedbackText">Submit Feedback</span>
                <div id="submitFeedbackSpinner" class="loading-spinner-small hidden"
                     style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
            </button>
            <button class="btn-secondary" onclick="hideFeedbackModal()" style="width:auto;padding:12px 20px;">
                Cancel
            </button>
        </div>
    </div>
</div>

<!-- â”€â”€ Admin Responses Modal â”€â”€ -->
<div id="responsesModal" class="modal-overlay hidden">
    <div class="modal-box modal-box-wide">
        <div class="modal-header">
            <h3>ğŸ“¨ Admin Responses</h3>
            <button class="modal-close" onclick="hideResponsesModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <p style="color:#6B7280;font-size:0.88rem;font-family:'DM Sans',sans-serif;margin-bottom:20px;">
                Responses from our staff to your submitted feedback.
            </p>
            <div id="responsesContent"></div>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" onclick="hideResponsesModal()" style="width:100%;">Close</button>
        </div>
    </div>
</div>

<!-- â”€â”€ Password Reset Modal â”€â”€ -->
<div id="passwordResetModal" class="modal-overlay hidden">
    <div class="modal-box" style="max-width:420px;">
        <div class="modal-header">
            <h3>ğŸ”‘ Reset Password</h3>
            <button class="modal-close" onclick="hidePasswordResetModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <p style="color:#6B7280;font-size:0.88rem;font-family:'DM Sans',sans-serif;margin-bottom:20px;text-align:center;">
                Enter your email address and we'll send a reset link.
            </p>
            <div class="field-group">
                <label class="field-label" for="resetEmail">Email Address</label>
                <input id="resetEmail" type="email" placeholder="Enter your registered email"
                       class="field-input" required>
            </div>
        </div>
        <div class="modal-footer">
            <button id="sendResetBtn" class="btn-primary" style="flex:1;">
                <span id="sendResetText">Send Reset Link</span>
                <div id="sendResetSpinner" class="loading-spinner-small hidden"
                     style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
            </button>
            <button id="cancelResetBtn" class="btn-secondary" onclick="hidePasswordResetModal()"
                    style="width:auto;padding:12px 20px;">
                Cancel
            </button>
        </div>
        <div id="resetLoader" class="hidden text-center pb-4">
            <div class="loading-spinner mx-auto" style="width:28px;height:28px;"></div>
            <p class="mt-2 text-sm" style="color:var(--green-primary);font-family:'DM Sans',sans-serif;">Sendingâ€¦</p>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ADD STUDENT MODAL (NEW â€” uses enrollment portal logic)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="addStudentModal" class="modal-overlay hidden">
    <div class="modal-box modal-box-wide">
        <div class="modal-header">
            <h3>â• Add Another Student</h3>
            <button class="modal-close" onclick="hideAddStudentModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <p style="color:#6B7280;font-size:0.88rem;font-family:'DM Sans',sans-serif;margin-bottom:20px;">
                Enrol an additional child by filling in the details below.
                They will appear in your dashboard immediately as <strong>Pending Registration</strong>
                and a staff member will confirm the details.
            </p>

            <!-- Step Progress -->
            <div class="stepper">
                <div class="step-item active" id="step-bar-1"></div>
                <div class="step-item" id="step-bar-2"></div>
                <div class="step-item" id="step-bar-3"></div>
            </div>

            <!-- â”€â”€ Step 1: Basic Info â”€â”€ -->
            <div class="step-panel active" id="add-step-1">
                <h4 style="font-size:1rem;color:var(--green-deep);margin:0 0 16px;">Step 1 â€” Student Information</h4>
                <div class="grid grid-cols-1 gap-4" style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
                    <div class="field-group" style="margin:0;">
                        <label class="field-label" for="newStudentName">Full Name *</label>
                        <input id="newStudentName" type="text" placeholder="Student's full name"
                               class="field-input" required>
                    </div>
                    <div class="field-group" style="margin:0;">
                        <label class="field-label" for="newStudentGender">Gender *</label>
                        <select id="newStudentGender" class="field-input" required>
                            <option value="">Select gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                            <option value="prefer-not-to-say">Prefer not to say</option>
                        </select>
                    </div>
                    <div class="field-group" style="margin:0;">
                        <label class="field-label" for="newStudentDob">Date of Birth *</label>
                        <input id="newStudentDob" type="date" class="field-input" required>
                    </div>
                    <div class="field-group" style="margin:0;">
                        <label class="field-label" for="newStudentActualGrade">Current School Grade *</label>
                        <select id="newStudentActualGrade" class="field-input" required>
                            <option value="">Select grade</option>
                            <option value="preschool">Preschool</option>
                            <option value="kindergarten">Kindergarten</option>
                            <option value="grade1">Grade 1</option>
                            <option value="grade2">Grade 2</option>
                            <option value="grade3">Grade 3</option>
                            <option value="grade4">Grade 4</option>
                            <option value="grade5">Grade 5</option>
                            <option value="grade6">Grade 6</option>
                            <option value="grade7">Grade 7</option>
                            <option value="grade8">Grade 8</option>
                            <option value="grade9">Grade 9</option>
                            <option value="grade10">Grade 10</option>
                            <option value="grade11">Grade 11</option>
                            <option value="grade12">Grade 12</option>
                        </select>
                    </div>
                    <div class="field-group" style="margin:0;">
                        <label class="field-label" for="newStudentFeeGroup">Tuition Level *</label>
                        <select id="newStudentFeeGroup" class="field-input" required>
                            <option value="">Select level</option>
                            <option value="preschool">Preschool â€“ Grade 1</option>
                            <option value="grade2-4">Grade 2 â€“ 4</option>
                            <option value="grade5-8">Grade 5 â€“ 8</option>
                            <option value="grade9-12">Grade 9 â€“ 12</option>
                        </select>
                    </div>
                    <div class="field-group" style="margin:0;">
                        <label class="field-label" for="newStudentStartDate">Desired Start Date</label>
                        <input id="newStudentStartDate" type="date" class="field-input">
                    </div>
                </div>
            </div>

            <!-- â”€â”€ Step 2: Subjects & Schedule â”€â”€ -->
            <div class="step-panel" id="add-step-2">
                <h4 style="font-size:1rem;color:var(--green-deep);margin:0 0 16px;">Step 2 â€” Subjects &amp; Schedule</h4>

                <div class="field-group">
                    <label class="field-label">Academic Subjects (select all that apply)</label>
                    <div class="picker-grid" id="newStudentSubjects">
                        <span class="picker-chip" data-subject="Math" onclick="togglePickerChip(this)">Math</span>
                        <span class="picker-chip" data-subject="Language Arts" onclick="togglePickerChip(this)">Language Arts</span>
                        <span class="picker-chip" data-subject="Geography" onclick="togglePickerChip(this)">Geography</span>
                        <span class="picker-chip" data-subject="Science" onclick="togglePickerChip(this)">Science</span>
                        <span class="picker-chip" data-subject="Biology" onclick="togglePickerChip(this)">Biology</span>
                        <span class="picker-chip" data-subject="Physics" onclick="togglePickerChip(this)">Physics</span>
                        <span class="picker-chip" data-subject="Chemistry" onclick="togglePickerChip(this)">Chemistry</span>
                        <span class="picker-chip" data-subject="Microbiology" onclick="togglePickerChip(this)">Microbiology</span>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label">Preferred Days (select at least one)</label>
                    <div class="picker-grid" id="newStudentDays">
                        <span class="picker-chip" data-day="Monday" onclick="togglePickerChip(this)">Mon</span>
                        <span class="picker-chip" data-day="Tuesday" onclick="togglePickerChip(this)">Tue</span>
                        <span class="picker-chip" data-day="Wednesday" onclick="togglePickerChip(this)">Wed</span>
                        <span class="picker-chip" data-day="Thursday" onclick="togglePickerChip(this)">Thu</span>
                        <span class="picker-chip" data-day="Friday" onclick="togglePickerChip(this)">Fri</span>
                        <span class="picker-chip" data-day="Saturday" onclick="togglePickerChip(this)">Sat</span>
                        <span class="picker-chip" data-day="Sunday" onclick="togglePickerChip(this)">Sun</span>
                    </div>
                </div>

                <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
                    <div class="field-group" style="margin:0;">
                        <label class="field-label" for="newStudentStartHour">Class Start Time</label>
                        <select id="newStudentStartHour" class="field-input">
                            <option value="">Select hour</option>
                            <option value="7">7:00 AM</option>
                            <option value="8">8:00 AM</option>
                            <option value="9">9:00 AM</option>
                            <option value="10">10:00 AM</option>
                            <option value="11">11:00 AM</option>
                            <option value="12">12:00 PM</option>
                            <option value="13">1:00 PM</option>
                            <option value="14">2:00 PM</option>
                            <option value="15">3:00 PM</option>
                            <option value="16">4:00 PM</option>
                            <option value="17">5:00 PM</option>
                            <option value="18">6:00 PM</option>
                            <option value="19">7:00 PM</option>
                            <option value="20">8:00 PM</option>
                        </select>
                    </div>
                    <div class="field-group" style="margin:0;">
                        <label class="field-label" for="newStudentEndHour">Class End Time</label>
                        <select id="newStudentEndHour" class="field-input">
                            <option value="">Select hour</option>
                            <option value="8">8:00 AM</option>
                            <option value="9">9:00 AM</option>
                            <option value="10">10:00 AM</option>
                            <option value="11">11:00 AM</option>
                            <option value="12">12:00 PM</option>
                            <option value="13">1:00 PM</option>
                            <option value="14">2:00 PM</option>
                            <option value="15">3:00 PM</option>
                            <option value="16">4:00 PM</option>
                            <option value="17">5:00 PM</option>
                            <option value="18">6:00 PM</option>
                            <option value="19">7:00 PM</option>
                            <option value="20">8:00 PM</option>
                            <option value="21">9:00 PM</option>
                        </select>
                    </div>
                </div>

                <div class="field-group" style="margin-top:16px;">
                    <label class="field-label" for="newStudentSessions">Session Frequency *</label>
                    <select id="newStudentSessions" class="field-input">
                        <option value="">Select frequency</option>
                        <option value="twice">Twice weekly</option>
                        <option value="three">3x weekly</option>
                        <option value="five">5x weekly (daily)</option>
                    </select>
                </div>

                <div class="field-group">
                    <label class="field-label" for="newStudentTutor">Tutor Preference</label>
                    <select id="newStudentTutor" class="field-input">
                        <option value="">No preference</option>
                        <option value="male">Male tutor</option>
                        <option value="female">Female tutor</option>
                    </select>
                </div>
            </div>

            <!-- â”€â”€ Step 3: Review â”€â”€ -->
            <div class="step-panel" id="add-step-3">
                <h4 style="font-size:1rem;color:var(--green-deep);margin:0 0 16px;">Step 3 â€” Review &amp; Submit</h4>
                <div id="addStudentReview"
                     style="background:var(--green-pale);border:1px solid var(--green-light);border-radius:12px;padding:20px;font-family:'DM Sans',sans-serif;font-size:0.9rem;line-height:1.7;color:#374151;">
                </div>
                <p style="margin-top:16px;font-size:0.82rem;color:#6B7280;font-family:'DM Sans',sans-serif;">
                    â„¹ï¸ Your new student will be created as <strong>Pending Registration</strong>.
                    A staff member will review and confirm the enrolment details.
                </p>
            </div>
        </div>

        <!-- Modal Footer with Step Navigation -->
        <div class="modal-footer" style="justify-content:space-between;">
            <button id="addStudentPrevBtn" class="btn-secondary" onclick="addStudentPrev()"
                    style="width:auto;padding:12px 24px;display:none;">
                â† Back
            </button>
            <div style="flex:1;"></div>
            <button id="addStudentNextBtn" class="btn-primary" onclick="addStudentNext()"
                    style="width:auto;padding:12px 24px;">
                Next â†’
            </button>
            <button id="addStudentSubmitBtn" class="btn-primary hidden" onclick="submitNewStudent()"
                    style="width:auto;padding:12px 24px;">
                <span id="addStudentSubmitText">âœ… Submit Enrolment</span>
                <div id="addStudentSubmitSpinner" class="loading-spinner-small hidden"
                     style="border-color:rgba(255,255,255,0.3);border-top-color:white;"></div>
            </button>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PRIVACY POLICY MODAL
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="privacyModal" class="modal-overlay hidden">
    <div class="modal-box modal-box-wide">
        <div class="modal-header">
            <h3 id="privacyModalTitle">ğŸ”’ Privacy Policy</h3>
            <button class="modal-close" onclick="hidePrivacyModal()">Ã—</button>
        </div>
        <div class="modal-body" id="privacyModalBody">
            <!-- Content injected by JS -->
        </div>
        <div class="modal-footer">
            <button class="btn-primary" onclick="hidePrivacyModal()" style="max-width:180px;">
                I Understand
            </button>
        </div>
    </div>
</div>

<!-- Load the parent portal JS as a module -->
<script type="module" src="parent.js"></script>
</body>
</html>
